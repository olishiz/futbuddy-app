{"version":3,"file":"default-node_modules_angular_fire_fesm2015_angular-fire-compat-firestore_js.js","mappings":"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AiD;EAC7C3C,sDAAS,CAAC1V,IAAD,CAAT,CAAgB+rB,aAAhB,CAA8B1T,SAA9B;AACH;;;;;;;;;;;;;;;;;;;;ACtjB2C;AACujC;AAC/iC;AACJ;;AAEhD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+DAAc,2DAA2D,WAAW;AACtG;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,+DAAc;AAChC;AACA;AACA;AACA;AACA,SAAS,uEAAkB;AAC3B,kBAAkB,+DAAc;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,uEAAsB;AAC9C;AACA;AACA;AACA,wBAAwB,qEAAoB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,+EAA0B,wBAAwB,gBAAgB;AACjF;AACA;AACA,eAAe,uFAAkC;AACjD;AACA;AACA,eAAe,8EAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,4DAAW;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,6DAAQ;AACpB,iDAAiD,YAAY;AAC7D;AACA;AACA,4DAA4D;AAC5D;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,QAAQ,6EAAwB;AAChC;AACA;AACA,eAAe,kEAAa;AAC5B;AACA;AACA,eAAe,mEAAc;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,+EAA0B;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yEAAoB;AACnC;AACA;AACA,eAAe,sEAAiB;AAChC;AACA;AACA;AACA,sBAAsB,+DAAc;AACpC;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,+DAAU;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,wDAAG;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,oEAAe;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mEAAc;AAC7B;AACA;AACA,QAAQ,8EAAyB;AACjC,kCAAkC,2DAAY,8BAA8B,iEAAY;AACxF;AACA;AACA,eAAe,+DAAU;AACzB;AACA;AACA,eAAe,+DAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,6BAA6B,uEAAsB;AACnD;AACA;AACA;AACA;AACA;AACA,4BAA4B,sDAAK;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,gEAAa;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,iEAAkB;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,sEAAuB;AACvD;AACA,0JAA0J;AAC1J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,+DAAc;AACpC;AACA,mBAAmB,wBAAwB,MAAM,YAAY;AAC7D;AACA,oDAAoD,kEAAmB,qCAAqC,6DAAY;AACxH;AACA;AACA,oDAAoD,kEAAmB;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,+DAAU;AACrE;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,kEAAkB;AAClC,+BAA+B,kEAAmB;AAClD;AACA;AACA,eAAe,6DAAQ;AACvB;AACA;AACA;AACA;AACA;AACA,uBAAuB,2DAAM;AAC7B;AACA;AACA,uBAAuB,2DAAM;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,8DAAS;AAChC;AACA;AACA,uBAAuB,8DAAS;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,8DAAS;AACxB;AACA;AACA;AACA,+FAA+F,iEAAkB;AACjH,eAAe,+DAAU;AACzB;AACA;AACA;AACA;AACA,mBAAmB,oEAAe;AAClC;AACA;AACA,mBAAmB,qEAAgB;AACnC;AACA;AACA,mBAAmB,2DAAM;AACzB;AACA,4EAA4E,iEAAkB;AAC9F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kEAAa;AAC5B;AACA;AACA;AACA;AACA;AACA,QAAQ,iEAAY;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,0DAAK;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,4DAAO;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,0DAAK;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,gEAAW;AAC9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,4DAAO;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,+DAAU;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,8DAAS;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,0DAAK,iBAAiB,0DAAK;AACxE;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,+DAAU;AACzB;AACA;AACA;AACA;AACA,oBAAoB,qEAAgB;AACpC;AACA;AACA,oBAAoB,sEAAiB;AACrC;AACA;AACA,oBAAoB,4DAAO;AAC3B;AACA,0EAA0E,8DAAe;AACzF;AACA;AACA;AACA,0FAA0F,8DAAe;AACzG,eAAe,+DAAU;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,eAAe,kEAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,wDAAG;AAChE;AACA;AACA,6DAA6D,wDAAG;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,2DAAM;AACrB;AACA;AACA,eAAe,6DAAQ;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,0DAAK,cAAc,kEAAmB;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,0DAAW;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,oEAAmB;AAChD;AACA;AACA,gBAAgB,kEAAkB;AAClC,+BAA+B,0DAAW;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,oEAAe;AACxC;AACA;AACA;AACA;AACA,yBAAyB,gEAAW;AACpC;AACA;AACA;AACA;AACA,yBAAyB,+DAAU;AACnC;AACA;AACA;AACA;AACA,yBAAyB,gEAAW;AACpC;AACA;AACA;AACA;AACA,yBAAyB,8DAAS;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,0DAAS;AACrD;AACA;AACA;AACA,KAAK,4CAA4C;AACjD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,4DAAQ;;AAEG;;;;;;;;;;;;;;;;ACn+BW;AACjC;AACP,4BAA4B,qDAAS,0CAA0C,qDAAS;AACxF;;;;;;;;;;;;;ACH+B;;;;;;;;;;;;;ACAK","sources":["./node_modules/@angular/fire/fesm2015/angular-fire-compat-auth.js","./node_modules/@angular/fire/fesm2015/angular-fire-compat-firestore.js","./node_modules/@angular/fire/node_modules/@firebase/auth-compat/dist/index.esm2017.js","./node_modules/@angular/fire/node_modules/@firebase/auth/dist/esm2017/internal.js","./node_modules/@angular/fire/node_modules/@firebase/firestore-compat/dist/index.esm2017.js","./node_modules/rxjs/_esm2015/internal/operators/switchMapTo.js","./node_modules/@angular/fire/node_modules/firebase/compat/auth/dist/esm/index.esm.js","./node_modules/@angular/fire/node_modules/firebase/compat/firestore/dist/esm/index.esm.js"],"sourcesContent":["\nimport * as i0 from '@angular/core';\nimport { InjectionToken, PLATFORM_ID, Injectable, Inject, Optional, NgModule } from '@angular/core';\nimport { Subject, of, Observable, from, merge } from 'rxjs';\nimport { observeOn, switchMap, map, shareReplay, first, switchMapTo, subscribeOn, filter } from 'rxjs/operators';\nimport * as i1 from '@angular/fire';\nimport { keepUnstableUntilFirst, VERSION } from '@angular/fire';\nimport { cacheInstance, firebaseAppFactory, lazySDKProxy, FIREBASE_OPTIONS, FIREBASE_APP_NAME, applyMixins } from '@angular/fire/compat';\nimport { isPlatformServer } from '@angular/common';\nimport * as i2 from '@angular/fire/app-check';\nimport firebase from 'firebase/compat/app';\n\n// DO NOT MODIFY, this file is autogenerated by tools/build.ts\n// Export a null object with the same keys as firebase/compat/auth, so Proxy can work with proxy-polyfill in Internet Explorer\nconst proxyPolyfillCompat = {\n    name: null,\n    config: null,\n    emulatorConfig: null,\n    app: null,\n    applyActionCode: null,\n    checkActionCode: null,\n    confirmPasswordReset: null,\n    createUserWithEmailAndPassword: null,\n    currentUser: null,\n    fetchSignInMethodsForEmail: null,\n    isSignInWithEmailLink: null,\n    getRedirectResult: null,\n    languageCode: null,\n    settings: null,\n    onAuthStateChanged: null,\n    onIdTokenChanged: null,\n    sendSignInLinkToEmail: null,\n    sendPasswordResetEmail: null,\n    setPersistence: null,\n    signInAndRetrieveDataWithCredential: null,\n    signInAnonymously: null,\n    signInWithCredential: null,\n    signInWithCustomToken: null,\n    signInWithEmailAndPassword: null,\n    signInWithPhoneNumber: null,\n    signInWithEmailLink: null,\n    signInWithPopup: null,\n    signInWithRedirect: null,\n    signOut: null,\n    tenantId: null,\n    updateCurrentUser: null,\n    useDeviceLanguage: null,\n    useEmulator: null,\n    verifyPasswordResetCode: null,\n};\n\nconst USE_EMULATOR = new InjectionToken('angularfire2.auth.use-emulator');\nconst SETTINGS = new InjectionToken('angularfire2.auth.settings');\nconst TENANT_ID = new InjectionToken('angularfire2.auth.tenant-id');\nconst LANGUAGE_CODE = new InjectionToken('angularfire2.auth.langugage-code');\nconst USE_DEVICE_LANGUAGE = new InjectionToken('angularfire2.auth.use-device-language');\nconst PERSISTENCE = new InjectionToken('angularfire.auth.persistence');\nconst authFactory = (app, zone, useEmulator, tenantId, languageCode, useDeviceLanguage, settings, persistence) => cacheInstance(`${app.name}.auth`, 'AngularFireAuth', app.name, () => {\n    const auth = zone.runOutsideAngular(() => app.auth());\n    if (useEmulator) {\n        auth.useEmulator(...useEmulator);\n    }\n    if (tenantId) {\n        auth.tenantId = tenantId;\n    }\n    auth.languageCode = languageCode;\n    if (useDeviceLanguage) {\n        auth.useDeviceLanguage();\n    }\n    if (settings) {\n        for (const [k, v] of Object.entries(settings)) {\n            auth.settings[k] = v;\n        }\n    }\n    if (persistence) {\n        auth.setPersistence(persistence);\n    }\n    return auth;\n}, [useEmulator, tenantId, languageCode, useDeviceLanguage, settings, persistence]);\nclass AngularFireAuth {\n    constructor(options, name, \n    // tslint:disable-next-line:ban-types\n    platformId, zone, schedulers, useEmulator, // can't use the tuple here\n    settings, // can't use firebase.auth.AuthSettings here\n    tenantId, languageCode, useDeviceLanguage, persistence, _appCheckInstances) {\n        const logins = new Subject();\n        const auth = of(undefined).pipe(observeOn(schedulers.outsideAngular), switchMap(() => zone.runOutsideAngular(() => import('firebase/compat/auth'))), map(() => firebaseAppFactory(options, zone, name)), map(app => authFactory(app, zone, useEmulator, tenantId, languageCode, useDeviceLanguage, settings, persistence)), shareReplay({ bufferSize: 1, refCount: false }));\n        if (isPlatformServer(platformId)) {\n            this.authState = this.user = this.idToken = this.idTokenResult = this.credential = of(null);\n        }\n        else {\n            // HACK, as we're exporting auth.Auth, rather than auth, developers importing firebase.auth\n            //       (e.g, `import { auth } from 'firebase/compat/app'`) are getting an undefined auth object unexpectedly\n            //       as we're completely lazy. Let's eagerly load the Auth SDK here.\n            //       There could potentially be race conditions still... but this greatly decreases the odds while\n            //       we reevaluate the API.\n            const _ = auth.pipe(first()).subscribe();\n            const redirectResult = auth.pipe(switchMap(auth => auth.getRedirectResult().then(it => it, () => null)), keepUnstableUntilFirst, shareReplay({ bufferSize: 1, refCount: false }));\n            const authStateChanged = auth.pipe(switchMap(auth => new Observable(sub => ({ unsubscribe: zone.runOutsideAngular(() => auth.onAuthStateChanged(next => sub.next(next), err => sub.error(err), () => sub.complete())) }))));\n            const idTokenChanged = auth.pipe(switchMap(auth => new Observable(sub => ({ unsubscribe: zone.runOutsideAngular(() => auth.onIdTokenChanged(next => sub.next(next), err => sub.error(err), () => sub.complete())) }))));\n            this.authState = redirectResult.pipe(switchMapTo(authStateChanged), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n            this.user = redirectResult.pipe(switchMapTo(idTokenChanged), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n            this.idToken = this.user.pipe(switchMap(user => user ? from(user.getIdToken()) : of(null)));\n            this.idTokenResult = this.user.pipe(switchMap(user => user ? from(user.getIdTokenResult()) : of(null)));\n            this.credential = merge(redirectResult, logins, \n            // pipe in null authState to make credential zipable, just a weird devexp if\n            // authState and user go null to still have a credential\n            this.authState.pipe(filter(it => !it))).pipe(\n            // handle the { user: { } } when a user is already logged in, rather have null\n            // TODO handle the type corcersion better\n            map(credential => (credential === null || credential === void 0 ? void 0 : credential.user) ? credential : null), subscribeOn(schedulers.outsideAngular), observeOn(schedulers.insideAngular));\n        }\n        return lazySDKProxy(this, auth, zone, { spy: {\n                apply: (name, _, val) => {\n                    // If they call a signIn or createUser function listen into the promise\n                    // this will give us the user credential, push onto the logins Subject\n                    // to be consumed in .credential\n                    if (name.startsWith('signIn') || name.startsWith('createUser')) {\n                        // TODO fix the types, the trouble is UserCredential has everything optional\n                        val.then((user) => logins.next(user));\n                    }\n                }\n            } });\n    }\n}\nAngularFireAuth.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFireAuth, deps: [{ token: FIREBASE_OPTIONS }, { token: FIREBASE_APP_NAME, optional: true }, { token: PLATFORM_ID }, { token: i0.NgZone }, { token: i1.AngularFireSchedulers }, { token: USE_EMULATOR, optional: true }, { token: SETTINGS, optional: true }, { token: TENANT_ID, optional: true }, { token: LANGUAGE_CODE, optional: true }, { token: USE_DEVICE_LANGUAGE, optional: true }, { token: PERSISTENCE, optional: true }, { token: i2.AppCheckInstances, optional: true }], target: i0.FactoryTarget.Injectable });\nAngularFireAuth.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFireAuth, providedIn: 'any' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFireAuth, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'any'\n                }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [FIREBASE_OPTIONS]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [FIREBASE_APP_NAME]\n                }] }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: i0.NgZone }, { type: i1.AngularFireSchedulers }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [USE_EMULATOR]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [SETTINGS]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [TENANT_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [LANGUAGE_CODE]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [USE_DEVICE_LANGUAGE]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [PERSISTENCE]\n                }] }, { type: i2.AppCheckInstances, decorators: [{\n                    type: Optional\n                }] }]; } });\napplyMixins(AngularFireAuth, [proxyPolyfillCompat]);\n\nclass AngularFireAuthModule {\n    constructor() {\n        firebase.registerVersion('angularfire', VERSION.full, 'auth-compat');\n    }\n}\nAngularFireAuthModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFireAuthModule, deps: [], target: i0.FactoryTarget.NgModule });\nAngularFireAuthModule.mod = i0.ngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFireAuthModule });\nAngularFireAuthModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFireAuthModule, providers: [AngularFireAuth] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFireAuthModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [AngularFireAuth]\n                }]\n        }], ctorParameters: function () { return []; } });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AngularFireAuth, AngularFireAuthModule, LANGUAGE_CODE, PERSISTENCE, SETTINGS, TENANT_ID, USE_DEVICE_LANGUAGE, USE_EMULATOR, authFactory };\n","import * as i0 from '@angular/core';\nimport { InjectionToken, PLATFORM_ID, Injectable, Inject, Optional, NgModule } from '@angular/core';\nimport { asyncScheduler, Observable, from, of } from 'rxjs';\nimport * as i1 from '@angular/fire';\nimport { keepUnstableUntilFirst, VERSION } from '@angular/fire';\nimport { startWith, pairwise, map, scan, distinctUntilChanged, filter } from 'rxjs/operators';\nimport { firebaseAppFactory, cacheInstance, FIREBASE_OPTIONS, FIREBASE_APP_NAME } from '@angular/fire/compat';\nimport { isPlatformServer } from '@angular/common';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\nimport * as i2 from '@angular/fire/compat/auth';\nimport { authFactory, USE_EMULATOR as USE_EMULATOR$1, SETTINGS as SETTINGS$1, TENANT_ID, LANGUAGE_CODE, USE_DEVICE_LANGUAGE, PERSISTENCE } from '@angular/fire/compat/auth';\nimport * as i3 from '@angular/fire/app-check';\nimport firebase from 'firebase/compat/app';\n\nfunction _fromRef(ref, scheduler = asyncScheduler) {\n    return new Observable(subscriber => {\n        let unsubscribe;\n        if (scheduler != null) {\n            scheduler.schedule(() => {\n                unsubscribe = ref.onSnapshot({ includeMetadataChanges: true }, subscriber);\n            });\n        }\n        else {\n            unsubscribe = ref.onSnapshot({ includeMetadataChanges: true }, subscriber);\n        }\n        return () => {\n            if (unsubscribe != null) {\n                unsubscribe();\n            }\n        };\n    });\n}\nfunction fromRef(ref, scheduler) {\n    return _fromRef(ref, scheduler);\n}\nfunction fromDocRef(ref, scheduler) {\n    return fromRef(ref, scheduler)\n        .pipe(startWith(undefined), pairwise(), map(([priorPayload, payload]) => {\n        if (!payload.exists) {\n            return { payload, type: 'removed' };\n        }\n        if (!(priorPayload === null || priorPayload === void 0 ? void 0 : priorPayload.exists)) {\n            return { payload, type: 'added' };\n        }\n        return { payload, type: 'modified' };\n    }));\n}\nfunction fromCollectionRef(ref, scheduler) {\n    return fromRef(ref, scheduler).pipe(map(payload => ({ payload, type: 'query' })));\n}\n\n/**\n * Return a stream of document changes on a query. These results are not in sort order but in\n * order of occurence.\n */\nfunction docChanges(query, scheduler) {\n    return fromCollectionRef(query, scheduler)\n        .pipe(startWith(undefined), pairwise(), map(([priorAction, action]) => {\n        const docChanges = action.payload.docChanges();\n        const actions = docChanges.map(change => ({ type: change.type, payload: change }));\n        // the metadata has changed from the prior emission\n        if (priorAction && JSON.stringify(priorAction.payload.metadata) !== JSON.stringify(action.payload.metadata)) {\n            // go through all the docs in payload and figure out which ones changed\n            action.payload.docs.forEach((currentDoc, currentIndex) => {\n                const docChange = docChanges.find(d => d.doc.ref.isEqual(currentDoc.ref));\n                const priorDoc = priorAction === null || priorAction === void 0 ? void 0 : priorAction.payload.docs.find(d => d.ref.isEqual(currentDoc.ref));\n                if (docChange && JSON.stringify(docChange.doc.metadata) === JSON.stringify(currentDoc.metadata) ||\n                    !docChange && priorDoc && JSON.stringify(priorDoc.metadata) === JSON.stringify(currentDoc.metadata)) {\n                    // document doesn't appear to have changed, don't log another action\n                }\n                else {\n                    // since the actions are processed in order just push onto the array\n                    actions.push({\n                        type: 'modified',\n                        payload: {\n                            oldIndex: currentIndex,\n                            newIndex: currentIndex,\n                            type: 'modified',\n                            doc: currentDoc\n                        }\n                    });\n                }\n            });\n        }\n        return actions;\n    }));\n}\n/**\n * Return a stream of document changes on a query. These results are in sort order.\n */\nfunction sortedChanges(query, events, scheduler) {\n    return docChanges(query, scheduler)\n        .pipe(scan((current, changes) => combineChanges(current, changes.map(it => it.payload), events), []), distinctUntilChanged(), // cut down on unneed change cycles\n    map(changes => changes.map(c => ({ type: c.type, payload: c }))));\n}\n/**\n * Combines the total result set from the current set of changes from an incoming set\n * of changes.\n */\nfunction combineChanges(current, changes, events) {\n    changes.forEach(change => {\n        // skip unwanted change types\n        if (events.indexOf(change.type) > -1) {\n            current = combineChange(current, change);\n        }\n    });\n    return current;\n}\n/**\n * Splice arguments on top of a sliced array, to break top-level ===\n * this is useful for change-detection\n */\nfunction sliceAndSplice(original, start, deleteCount, ...args) {\n    const returnArray = original.slice();\n    returnArray.splice(start, deleteCount, ...args);\n    return returnArray;\n}\n/**\n * Creates a new sorted array from a new change.\n * Build our own because we allow filtering of action types ('added', 'removed', 'modified') before scanning\n * and so we have greater control over change detection (by breaking ===)\n */\nfunction combineChange(combined, change) {\n    switch (change.type) {\n        case 'added':\n            if (combined[change.newIndex] && combined[change.newIndex].doc.ref.isEqual(change.doc.ref)) {\n                // Not sure why the duplicates are getting fired\n            }\n            else {\n                return sliceAndSplice(combined, change.newIndex, 0, change);\n            }\n            break;\n        case 'modified':\n            if (combined[change.oldIndex] == null || combined[change.oldIndex].doc.ref.isEqual(change.doc.ref)) {\n                // When an item changes position we first remove it\n                // and then add it's new position\n                if (change.oldIndex !== change.newIndex) {\n                    const copiedArray = combined.slice();\n                    copiedArray.splice(change.oldIndex, 1);\n                    copiedArray.splice(change.newIndex, 0, change);\n                    return copiedArray;\n                }\n                else {\n                    return sliceAndSplice(combined, change.newIndex, 1, change);\n                }\n            }\n            break;\n        case 'removed':\n            if (combined[change.oldIndex] && combined[change.oldIndex].doc.ref.isEqual(change.doc.ref)) {\n                return sliceAndSplice(combined, change.oldIndex, 1);\n            }\n            break;\n    }\n    return combined;\n}\n\nfunction validateEventsArray(events) {\n    if (!events || events.length === 0) {\n        events = ['added', 'removed', 'modified'];\n    }\n    return events;\n}\n/**\n * AngularFirestoreCollection service\n *\n * This class creates a reference to a Firestore Collection. A reference and a query are provided in\n * in the constructor. The query can be the unqueried reference if no query is desired.The class\n * is generic which gives you type safety for data update methods and data streaming.\n *\n * This class uses Symbol.observable to transform into Observable using Observable.from().\n *\n * This class is rarely used directly and should be created from the AngularFirestore service.\n *\n * Example:\n *\n * const collectionRef = firebase.firestore.collection('stocks');\n * const query = collectionRef.where('price', '>', '0.01');\n * const fakeStock = new AngularFirestoreCollection<Stock>(collectionRef, query);\n *\n * // NOTE!: the updates are performed on the reference not the query\n * await fakeStock.add({ name: 'FAKE', price: 0.01 });\n *\n * // Subscribe to changes as snapshots. This provides you data updates as well as delta updates.\n * fakeStock.valueChanges().subscribe(value => console.log(value));\n */\nclass AngularFirestoreCollection {\n    /**\n     * The constructor takes in a CollectionReference and Query to provide wrapper methods\n     * for data operations and data streaming.\n     *\n     * Note: Data operation methods are done on the reference not the query. This means\n     * when you update data it is not updating data to the window of your query unless\n     * the data fits the criteria of the query. See the AssociatedRefence type for details\n     * on this implication.\n     */\n    constructor(ref, query, afs) {\n        this.ref = ref;\n        this.query = query;\n        this.afs = afs;\n    }\n    /**\n     * Listen to the latest change in the stream. This method returns changes\n     * as they occur and they are not sorted by query order. This allows you to construct\n     * your own data structure.\n     */\n    stateChanges(events) {\n        let source = docChanges(this.query, this.afs.schedulers.outsideAngular);\n        if (events && events.length > 0) {\n            source = source.pipe(map(actions => actions.filter(change => events.indexOf(change.type) > -1)));\n        }\n        return source.pipe(\n        // We want to filter out empty arrays, but always emit at first, so the developer knows\n        // that the collection has been resolve; even if it's empty\n        startWith(undefined), pairwise(), filter(([prior, current]) => current.length > 0 || !prior), map(([prior, current]) => current), keepUnstableUntilFirst);\n    }\n    /**\n     * Create a stream of changes as they occur it time. This method is similar to stateChanges()\n     * but it collects each event in an array over time.\n     */\n    auditTrail(events) {\n        return this.stateChanges(events).pipe(scan((current, action) => [...current, ...action], []));\n    }\n    /**\n     * Create a stream of synchronized changes. This method keeps the local array in sorted\n     * query order.\n     */\n    snapshotChanges(events) {\n        const validatedEvents = validateEventsArray(events);\n        const scheduledSortedChanges$ = sortedChanges(this.query, validatedEvents, this.afs.schedulers.outsideAngular);\n        return scheduledSortedChanges$.pipe(keepUnstableUntilFirst);\n    }\n    valueChanges(options = {}) {\n        return fromCollectionRef(this.query, this.afs.schedulers.outsideAngular)\n            .pipe(map(actions => actions.payload.docs.map(a => {\n            if (options.idField) {\n                return Object.assign(Object.assign({}, a.data()), { [options.idField]: a.id });\n            }\n            else {\n                return a.data();\n            }\n        })), keepUnstableUntilFirst);\n    }\n    /**\n     * Retrieve the results of the query once.\n     */\n    get(options) {\n        return from(this.query.get(options)).pipe(keepUnstableUntilFirst);\n    }\n    /**\n     * Add data to a collection reference.\n     *\n     * Note: Data operation methods are done on the reference not the query. This means\n     * when you update data it is not updating data to the window of your query unless\n     * the data fits the criteria of the query.\n     */\n    add(data) {\n        return this.ref.add(data);\n    }\n    /**\n     * Create a reference to a single document in a collection.\n     */\n    doc(path) {\n        // TODO is there a better way to solve this type issue\n        return new AngularFirestoreDocument(this.ref.doc(path), this.afs);\n    }\n}\n\n/**\n * AngularFirestoreDocument service\n *\n * This class creates a reference to a Firestore Document. A reference is provided in\n * in the constructor. The class is generic which gives you type safety for data update\n * methods and data streaming.\n *\n * This class uses Symbol.observable to transform into Observable using Observable.from().\n *\n * This class is rarely used directly and should be created from the AngularFirestore service.\n *\n * Example:\n *\n * const fakeStock = new AngularFirestoreDocument<Stock>(doc('stocks/FAKE'));\n * await fakeStock.set({ name: 'FAKE', price: 0.01 });\n * fakeStock.valueChanges().map(snap => {\n *   if(snap.exists) return snap.data();\n *   return null;\n * }).subscribe(value => console.log(value));\n * // OR! Transform using Observable.from() and the data is unwrapped for you\n * Observable.from(fakeStock).subscribe(value => console.log(value));\n */\nclass AngularFirestoreDocument {\n    /**\n     * The constructor takes in a DocumentReference to provide wrapper methods\n     * for data operations, data streaming, and Symbol.observable.\n     */\n    constructor(ref, afs) {\n        this.ref = ref;\n        this.afs = afs;\n    }\n    /**\n     * Create or overwrite a single document.\n     */\n    set(data, options) {\n        return this.ref.set(data, options);\n    }\n    /**\n     * Update some fields of a document without overwriting the entire document.\n     */\n    update(data) {\n        return this.ref.update(data);\n    }\n    /**\n     * Delete a document.\n     */\n    delete() {\n        return this.ref.delete();\n    }\n    /**\n     * Create a reference to a sub-collection given a path and an optional query\n     * function.\n     */\n    collection(path, queryFn) {\n        const collectionRef = this.ref.collection(path);\n        const { ref, query } = associateQuery(collectionRef, queryFn);\n        return new AngularFirestoreCollection(ref, query, this.afs);\n    }\n    /**\n     * Listen to snapshot updates from the document.\n     */\n    snapshotChanges() {\n        const scheduledFromDocRef$ = fromDocRef(this.ref, this.afs.schedulers.outsideAngular);\n        return scheduledFromDocRef$.pipe(keepUnstableUntilFirst);\n    }\n    valueChanges(options = {}) {\n        return this.snapshotChanges().pipe(map(({ payload }) => options.idField ? Object.assign(Object.assign({}, payload.data()), { [options.idField]: payload.id }) : payload.data()));\n    }\n    /**\n     * Retrieve the document once.\n     */\n    get(options) {\n        return from(this.ref.get(options)).pipe(keepUnstableUntilFirst);\n    }\n}\n\n/**\n * AngularFirestoreCollectionGroup service\n *\n * This class holds a reference to a Firestore Collection Group Query.\n *\n * This class uses Symbol.observable to transform into Observable using Observable.from().\n *\n * This class is rarely used directly and should be created from the AngularFirestore service.\n *\n * Example:\n *\n * const collectionGroup = firebase.firestore.collectionGroup('stocks');\n * const query = collectionRef.where('price', '>', '0.01');\n * const fakeStock = new AngularFirestoreCollectionGroup<Stock>(query, afs);\n *\n * // Subscribe to changes as snapshots. This provides you data updates as well as delta updates.\n * fakeStock.valueChanges().subscribe(value => console.log(value));\n */\nclass AngularFirestoreCollectionGroup {\n    /**\n     * The constructor takes in a CollectionGroupQuery to provide wrapper methods\n     * for data operations and data streaming.\n     */\n    constructor(query, afs) {\n        this.query = query;\n        this.afs = afs;\n    }\n    /**\n     * Listen to the latest change in the stream. This method returns changes\n     * as they occur and they are not sorted by query order. This allows you to construct\n     * your own data structure.\n     */\n    stateChanges(events) {\n        if (!events || events.length === 0) {\n            return docChanges(this.query, this.afs.schedulers.outsideAngular).pipe(keepUnstableUntilFirst);\n        }\n        return docChanges(this.query, this.afs.schedulers.outsideAngular)\n            .pipe(map(actions => actions.filter(change => events.indexOf(change.type) > -1)), filter(changes => changes.length > 0), keepUnstableUntilFirst);\n    }\n    /**\n     * Create a stream of changes as they occur it time. This method is similar to stateChanges()\n     * but it collects each event in an array over time.\n     */\n    auditTrail(events) {\n        return this.stateChanges(events).pipe(scan((current, action) => [...current, ...action], []));\n    }\n    /**\n     * Create a stream of synchronized changes. This method keeps the local array in sorted\n     * query order.\n     */\n    snapshotChanges(events) {\n        const validatedEvents = validateEventsArray(events);\n        const scheduledSortedChanges$ = sortedChanges(this.query, validatedEvents, this.afs.schedulers.outsideAngular);\n        return scheduledSortedChanges$.pipe(keepUnstableUntilFirst);\n    }\n    valueChanges(options = {}) {\n        const fromCollectionRefScheduled$ = fromCollectionRef(this.query, this.afs.schedulers.outsideAngular);\n        return fromCollectionRefScheduled$\n            .pipe(map(actions => actions.payload.docs.map(a => {\n            if (options.idField) {\n                return Object.assign({ [options.idField]: a.id }, a.data());\n            }\n            else {\n                return a.data();\n            }\n        })), keepUnstableUntilFirst);\n    }\n    /**\n     * Retrieve the results of the query once.\n     */\n    get(options) {\n        return from(this.query.get(options)).pipe(keepUnstableUntilFirst);\n    }\n}\n\n/**\n * The value of this token determines whether or not the firestore will have persistance enabled\n */\nconst ENABLE_PERSISTENCE = new InjectionToken('angularfire2.enableFirestorePersistence');\nconst PERSISTENCE_SETTINGS = new InjectionToken('angularfire2.firestore.persistenceSettings');\nconst SETTINGS = new InjectionToken('angularfire2.firestore.settings');\nconst USE_EMULATOR = new InjectionToken('angularfire2.firestore.use-emulator');\n/**\n * A utility methods for associating a collection reference with\n * a query.\n *\n * @param collectionRef - A collection reference to query\n * @param queryFn - The callback to create a query\n *\n * Example:\n * const { query, ref } = associateQuery(docRef.collection('items'), ref => {\n *  return ref.where('age', '<', 200);\n * });\n */\nfunction associateQuery(collectionRef, queryFn = ref => ref) {\n    const query = queryFn(collectionRef);\n    const ref = collectionRef;\n    return { query, ref };\n}\n/**\n * AngularFirestore Service\n *\n * This service is the main entry point for this feature module. It provides\n * an API for creating Collection and Reference services. These services can\n * then be used to do data updates and observable streams of the data.\n *\n * Example:\n *\n * import { Component } from '@angular/core';\n * import { AngularFirestore, AngularFirestoreCollection, AngularFirestoreDocument } from '@angular/fire/firestore';\n * import { Observable } from 'rxjs/Observable';\n * import { from } from 'rxjs/observable';\n *\n * @Component({\n *   selector: 'app-my-component',\n *   template: `\n *    <h2>Items for {{ (profile | async)?.name }}\n *    <ul>\n *       <li *ngFor=\"let item of items | async\">{{ item.name }}</li>\n *    </ul>\n *    <div class=\"control-input\">\n *       <input type=\"text\" #itemname />\n *       <button (click)=\"addItem(itemname.value)\">Add Item</button>\n *    </div>\n *   `\n * })\n * export class MyComponent implements OnInit {\n *\n *   // services for data operations and data streaming\n *   private readonly itemsRef: AngularFirestoreCollection<Item>;\n *   private readonly profileRef: AngularFirestoreDocument<Profile>;\n *\n *   // observables for template\n *   items: Observable<Item[]>;\n *   profile: Observable<Profile>;\n *\n *   // inject main service\n *   constructor(private readonly afs: AngularFirestore) {}\n *\n *   ngOnInit() {\n *     this.itemsRef = afs.collection('items', ref => ref.where('user', '==', 'davideast').limit(10));\n *     this.items = this.itemsRef.valueChanges().map(snap => snap.docs.map(data => doc.data()));\n *     // this.items = from(this.itemsRef); // you can also do this with no mapping\n *\n *     this.profileRef = afs.doc('users/davideast');\n *     this.profile = this.profileRef.valueChanges();\n *   }\n *\n *   addItem(name: string) {\n *     const user = 'davideast';\n *     this.itemsRef.add({ name, user });\n *   }\n * }\n */\nclass AngularFirestore {\n    /**\n     * Each Feature of AngularFire has a FirebaseApp injected. This way we\n     * don't rely on the main Firebase App instance and we can create named\n     * apps and use multiple apps.\n     */\n    constructor(options, name, shouldEnablePersistence, settings, \n    // tslint:disable-next-line:ban-types\n    platformId, zone, schedulers, persistenceSettings, _useEmulator, auth, useAuthEmulator, authSettings, // can't use firebase.auth.AuthSettings here\n    tenantId, languageCode, useDeviceLanguage, persistence, _appCheckInstances) {\n        this.schedulers = schedulers;\n        const app = firebaseAppFactory(options, zone, name);\n        const useEmulator = _useEmulator;\n        if (auth) {\n            authFactory(app, zone, useAuthEmulator, tenantId, languageCode, useDeviceLanguage, authSettings, persistence);\n        }\n        [this.firestore, this.persistenceEnabled$] = cacheInstance(`${app.name}.firestore`, 'AngularFirestore', app.name, () => {\n            const firestore = zone.runOutsideAngular(() => app.firestore());\n            if (settings) {\n                firestore.settings(settings);\n            }\n            if (useEmulator) {\n                firestore.useEmulator(...useEmulator);\n            }\n            if (shouldEnablePersistence && !isPlatformServer(platformId)) {\n                // We need to try/catch here because not all enablePersistence() failures are caught\n                // https://github.com/firebase/firebase-js-sdk/issues/608\n                const enablePersistence = () => {\n                    try {\n                        return from(firestore.enablePersistence(persistenceSettings || undefined).then(() => true, () => false));\n                    }\n                    catch (e) {\n                        if (typeof console !== 'undefined') {\n                            console.warn(e);\n                        }\n                        return of(false);\n                    }\n                };\n                return [firestore, zone.runOutsideAngular(enablePersistence)];\n            }\n            else {\n                return [firestore, of(false)];\n            }\n        }, [settings, useEmulator, shouldEnablePersistence]);\n    }\n    collection(pathOrRef, queryFn) {\n        let collectionRef;\n        if (typeof pathOrRef === 'string') {\n            collectionRef = this.firestore.collection(pathOrRef);\n        }\n        else {\n            collectionRef = pathOrRef;\n        }\n        const { ref, query } = associateQuery(collectionRef, queryFn);\n        const refInZone = this.schedulers.ngZone.run(() => ref);\n        return new AngularFirestoreCollection(refInZone, query, this);\n    }\n    /**\n     * Create a reference to a Firestore Collection Group based on a collectionId\n     * and an optional query function to narrow the result\n     * set.\n     */\n    collectionGroup(collectionId, queryGroupFn) {\n        const queryFn = queryGroupFn || (ref => ref);\n        const collectionGroup = this.firestore.collectionGroup(collectionId);\n        return new AngularFirestoreCollectionGroup(queryFn(collectionGroup), this);\n    }\n    doc(pathOrRef) {\n        let ref;\n        if (typeof pathOrRef === 'string') {\n            ref = this.firestore.doc(pathOrRef);\n        }\n        else {\n            ref = pathOrRef;\n        }\n        const refInZone = this.schedulers.ngZone.run(() => ref);\n        return new AngularFirestoreDocument(refInZone, this);\n    }\n    /**\n     * Returns a generated Firestore Document Id.\n     */\n    createId() {\n        return this.firestore.collection('_').doc().id;\n    }\n}\nAngularFirestore.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFirestore, deps: [{ token: FIREBASE_OPTIONS }, { token: FIREBASE_APP_NAME, optional: true }, { token: ENABLE_PERSISTENCE, optional: true }, { token: SETTINGS, optional: true }, { token: PLATFORM_ID }, { token: i0.NgZone }, { token: i1.AngularFireSchedulers }, { token: PERSISTENCE_SETTINGS, optional: true }, { token: USE_EMULATOR, optional: true }, { token: i2.AngularFireAuth, optional: true }, { token: USE_EMULATOR$1, optional: true }, { token: SETTINGS$1, optional: true }, { token: TENANT_ID, optional: true }, { token: LANGUAGE_CODE, optional: true }, { token: USE_DEVICE_LANGUAGE, optional: true }, { token: PERSISTENCE, optional: true }, { token: i3.AppCheckInstances, optional: true }], target: i0.FactoryTarget.Injectable });\nAngularFirestore.prov = i0.ngDeclareInjectable({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFirestore, providedIn: 'any' });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFirestore, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'any'\n                }]\n        }], ctorParameters: function () { return [{ type: undefined, decorators: [{\n                    type: Inject,\n                    args: [FIREBASE_OPTIONS]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [FIREBASE_APP_NAME]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [ENABLE_PERSISTENCE]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [SETTINGS]\n                }] }, { type: Object, decorators: [{\n                    type: Inject,\n                    args: [PLATFORM_ID]\n                }] }, { type: i0.NgZone }, { type: i1.AngularFireSchedulers }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [PERSISTENCE_SETTINGS]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [USE_EMULATOR]\n                }] }, { type: i2.AngularFireAuth, decorators: [{\n                    type: Optional\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [USE_EMULATOR$1]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [SETTINGS$1]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [TENANT_ID]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [LANGUAGE_CODE]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [USE_DEVICE_LANGUAGE]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [PERSISTENCE]\n                }] }, { type: i3.AppCheckInstances, decorators: [{\n                    type: Optional\n                }] }]; } });\n\nclass AngularFirestoreModule {\n    constructor() {\n        firebase.registerVersion('angularfire', VERSION.full, 'fst-compat');\n    }\n    /**\n     * Attempt to enable persistent storage, if possible\n     */\n    static enablePersistence(persistenceSettings) {\n        return {\n            ngModule: AngularFirestoreModule,\n            providers: [\n                { provide: ENABLE_PERSISTENCE, useValue: true },\n                { provide: PERSISTENCE_SETTINGS, useValue: persistenceSettings },\n            ]\n        };\n    }\n}\nAngularFirestoreModule.fac = i0.ngDeclareFactory({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFirestoreModule, deps: [], target: i0.FactoryTarget.NgModule });\nAngularFirestoreModule.mod = i0.ngDeclareNgModule({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFirestoreModule });\nAngularFirestoreModule.inj = i0.ngDeclareInjector({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFirestoreModule, providers: [AngularFirestore] });\ni0.ngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"12.1.3\", ngImport: i0, type: AngularFirestoreModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    providers: [AngularFirestore]\n                }]\n        }], ctorParameters: function () { return []; } });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AngularFirestore, AngularFirestoreCollection, AngularFirestoreCollectionGroup, AngularFirestoreDocument, AngularFirestoreModule, ENABLE_PERSISTENCE, PERSISTENCE_SETTINGS, SETTINGS, USE_EMULATOR, associateQuery, combineChange, combineChanges, docChanges, fromCollectionRef, fromDocRef, fromRef, sortedChanges, validateEventsArray };\n","import firebase from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport { Component } from '@firebase/component';\nimport { isBrowserExtension, getUA, isReactNative, isNode, isIndexedDBAvailable, isIE, FirebaseError } from '@firebase/util';\n\nvar name = \"@firebase/auth-compat\";\nvar version = \"0.4.2\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\r\nfunction _getCurrentScheme() {\r\n    var _a;\r\n    return ((_a = self === null || self === void 0 ? void 0 : self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;\r\n}\r\n/**\r\n * @return {boolean} Whether the current environment is http or https.\r\n */\r\nfunction _isHttpOrHttps() {\r\n    return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\r\n}\r\n/**\r\n * @param {?string=} ua The user agent.\r\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\r\n *     Cordova environment.\r\n */\r\nfunction _isAndroidOrIosCordovaScheme(ua = getUA()) {\r\n    return !!((_getCurrentScheme() === 'file:' ||\r\n        _getCurrentScheme() === 'ionic:' ||\r\n        _getCurrentScheme() === 'capacitor:') &&\r\n        ua.toLowerCase().match(/iphone|ipad|ipod|android/));\r\n}\r\n/**\r\n * @return {boolean} Whether the environment is a native environment, where\r\n *     CORS checks do not apply.\r\n */\r\nfunction _isNativeEnvironment() {\r\n    return isReactNative() || isNode();\r\n}\r\n/**\r\n * Checks whether the user agent is IE11.\r\n * @return {boolean} True if it is IE11.\r\n */\r\nfunction _isIe11() {\r\n    return isIE() && (document === null || document === void 0 ? void 0 : document.documentMode) === 11;\r\n}\r\n/**\r\n * Checks whether the user agent is Edge.\r\n * @param {string} userAgent The browser user agent string.\r\n * @return {boolean} True if it is Edge.\r\n */\r\nfunction _isEdge(ua = getUA()) {\r\n    return /Edge\\/\\d+/.test(ua);\r\n}\r\n/**\r\n * @param {?string=} opt_userAgent The navigator user agent.\r\n * @return {boolean} Whether local storage is not synchronized between an iframe\r\n *     and a popup of the same domain.\r\n */\r\nfunction _isLocalStorageNotSynchronized(ua = getUA()) {\r\n    return _isIe11() || _isEdge(ua);\r\n}\r\n/** @return {boolean} Whether web storage is supported. */\r\nfunction _isWebStorageSupported() {\r\n    try {\r\n        const storage = self.localStorage;\r\n        const key = exp._generateEventId();\r\n        if (storage) {\r\n            // setItem will throw an exception if we cannot access WebStorage (e.g.,\r\n            // Safari in private mode).\r\n            storage['setItem'](key, '1');\r\n            storage['removeItem'](key);\r\n            // For browsers where iframe web storage does not synchronize with a popup\r\n            // of the same domain, indexedDB is used for persistent storage. These\r\n            // browsers include IE11 and Edge.\r\n            // Make sure it is supported (IE11 and Edge private mode does not support\r\n            // that).\r\n            if (_isLocalStorageNotSynchronized()) {\r\n                // In such browsers, if indexedDB is not supported, an iframe cannot be\r\n                // notified of the popup sign in result.\r\n                return isIndexedDBAvailable();\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n    catch (e) {\r\n        // localStorage is not available from a worker. Test availability of\r\n        // indexedDB.\r\n        return _isWorker() && isIndexedDBAvailable();\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * @param {?Object=} global The optional global scope.\r\n * @return {boolean} Whether current environment is a worker.\r\n */\r\nfunction _isWorker() {\r\n    // WorkerGlobalScope only defined in worker environment.\r\n    return (typeof global !== 'undefined' &&\r\n        'WorkerGlobalScope' in global &&\r\n        'importScripts' in global);\r\n}\r\nfunction _isPopupRedirectSupported() {\r\n    return ((_isHttpOrHttps() ||\r\n        isBrowserExtension() ||\r\n        _isAndroidOrIosCordovaScheme()) &&\r\n        // React Native with remote debugging reports its location.protocol as\r\n        // http.\r\n        !_isNativeEnvironment() &&\r\n        // Local storage has to be supported for browser popup and redirect\r\n        // operations to work.\r\n        _isWebStorageSupported() &&\r\n        // DOM, popups and redirects are not supported within a worker.\r\n        !_isWorker());\r\n}\r\n/** Quick check that indicates the platform *may* be Cordova */\r\nfunction _isLikelyCordova() {\r\n    return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\r\n}\r\nasync function _isCordova() {\r\n    if (!_isLikelyCordova()) {\r\n        return false;\r\n    }\r\n    return new Promise(resolve => {\r\n        const timeoutId = setTimeout(() => {\r\n            // We've waited long enough; the telltale Cordova event didn't happen\r\n            resolve(false);\r\n        }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\r\n        document.addEventListener('deviceready', () => {\r\n            clearTimeout(timeoutId);\r\n            resolve(true);\r\n        });\r\n    });\r\n}\r\nfunction _getSelfWindow() {\r\n    return typeof window !== 'undefined' ? window : null;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst Persistence = {\r\n    LOCAL: 'local',\r\n    NONE: 'none',\r\n    SESSION: 'session'\r\n};\r\nconst _assert$3 = exp._assert;\r\nconst PERSISTENCE_KEY = 'persistence';\r\n/**\r\n * Validates that an argument is a valid persistence value. If an invalid type\r\n * is specified, an error is thrown synchronously.\r\n */\r\nfunction _validatePersistenceArgument(auth, persistence) {\r\n    _assert$3(Object.values(Persistence).includes(persistence), auth, \"invalid-persistence-type\" /* exp.AuthErrorCode.INVALID_PERSISTENCE */);\r\n    // Validate if the specified type is supported in the current environment.\r\n    if (isReactNative()) {\r\n        // This is only supported in a browser.\r\n        _assert$3(persistence !== Persistence.SESSION, auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if (isNode()) {\r\n        // Only none is supported in Node.js.\r\n        _assert$3(persistence === Persistence.NONE, auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    if (_isWorker()) {\r\n        // In a worker environment, either LOCAL or NONE are supported.\r\n        // If indexedDB not supported and LOCAL provided, throw an error\r\n        _assert$3(persistence === Persistence.NONE ||\r\n            (persistence === Persistence.LOCAL && isIndexedDBAvailable()), auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n        return;\r\n    }\r\n    // This is restricted by what the browser supports.\r\n    _assert$3(persistence === Persistence.NONE || _isWebStorageSupported(), auth, \"unsupported-persistence-type\" /* exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE */);\r\n}\r\nasync function _savePersistenceForRedirect(auth) {\r\n    await auth._initializationPromise;\r\n    const session = getSessionStorageIfAvailable();\r\n    const key = exp._persistenceKeyName(PERSISTENCE_KEY, auth.config.apiKey, auth.name);\r\n    if (session) {\r\n        session.setItem(key, auth._getPersistence());\r\n    }\r\n}\r\nfunction _getPersistencesFromRedirect(apiKey, appName) {\r\n    const session = getSessionStorageIfAvailable();\r\n    if (!session) {\r\n        return [];\r\n    }\r\n    const key = exp._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\r\n    const persistence = session.getItem(key);\r\n    switch (persistence) {\r\n        case Persistence.NONE:\r\n            return [exp.inMemoryPersistence];\r\n        case Persistence.LOCAL:\r\n            return [exp.indexedDBLocalPersistence, exp.browserSessionPersistence];\r\n        case Persistence.SESSION:\r\n            return [exp.browserSessionPersistence];\r\n        default:\r\n            return [];\r\n    }\r\n}\r\n/** Returns session storage, or null if the property access errors */\r\nfunction getSessionStorageIfAvailable() {\r\n    var _a;\r\n    try {\r\n        return ((_a = _getSelfWindow()) === null || _a === void 0 ? void 0 : _a.sessionStorage) || null;\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$2 = exp._assert;\r\n/** Platform-agnostic popup-redirect resolver */\r\nclass CompatPopupRedirectResolver {\r\n    constructor() {\r\n        // Create both resolvers for dynamic resolution later\r\n        this.browserResolver = exp._getInstance(exp.browserPopupRedirectResolver);\r\n        this.cordovaResolver = exp._getInstance(exp.cordovaPopupRedirectResolver);\r\n        // The actual resolver in use: either browserResolver or cordovaResolver.\r\n        this.underlyingResolver = null;\r\n        this._redirectPersistence = exp.browserSessionPersistence;\r\n        this._completeRedirectFn = exp._getRedirectResult;\r\n        this._overrideRedirectResult = exp._overrideRedirectResult;\r\n    }\r\n    async _initialize(auth) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._initialize(auth);\r\n    }\r\n    async _openPopup(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openPopup(auth, provider, authType, eventId);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        await this.selectUnderlyingResolver();\r\n        return this.assertedUnderlyingResolver._openRedirect(auth, provider, authType, eventId);\r\n    }\r\n    _isIframeWebStorageSupported(auth, cb) {\r\n        this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\r\n    }\r\n    _originValidation(auth) {\r\n        return this.assertedUnderlyingResolver._originValidation(auth);\r\n    }\r\n    get _shouldInitProactively() {\r\n        return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\r\n    }\r\n    get assertedUnderlyingResolver() {\r\n        _assert$2(this.underlyingResolver, \"internal-error\" /* exp.AuthErrorCode.INTERNAL_ERROR */);\r\n        return this.underlyingResolver;\r\n    }\r\n    async selectUnderlyingResolver() {\r\n        if (this.underlyingResolver) {\r\n            return;\r\n        }\r\n        // We haven't yet determined whether or not we're in Cordova; go ahead\r\n        // and determine that state now.\r\n        const isCordova = await _isCordova();\r\n        this.underlyingResolver = isCordova\r\n            ? this.cordovaResolver\r\n            : this.browserResolver;\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction unwrap(object) {\r\n    return object.unwrap();\r\n}\r\nfunction wrapped(object) {\r\n    return object.wrapped();\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction credentialFromResponse(userCredential) {\r\n    return credentialFromObject(userCredential);\r\n}\r\nfunction attachExtraErrorFields(auth, e) {\r\n    var _a;\r\n    // The response contains all fields from the server which may or may not\r\n    // actually match the underlying type\r\n    const response = (_a = e.customData) === null || _a === void 0 ? void 0 : _a._tokenResponse;\r\n    if ((e === null || e === void 0 ? void 0 : e.code) === 'auth/multi-factor-auth-required') {\r\n        const mfaErr = e;\r\n        mfaErr.resolver = new MultiFactorResolver(auth, exp.getMultiFactorResolver(auth, e));\r\n    }\r\n    else if (response) {\r\n        const credential = credentialFromObject(e);\r\n        const credErr = e;\r\n        if (credential) {\r\n            credErr.credential = credential;\r\n            credErr.tenantId = response.tenantId || undefined;\r\n            credErr.email = response.email || undefined;\r\n            credErr.phoneNumber = response.phoneNumber || undefined;\r\n        }\r\n    }\r\n}\r\nfunction credentialFromObject(object) {\r\n    const { _tokenResponse } = (object instanceof FirebaseError ? object.customData : object);\r\n    if (!_tokenResponse) {\r\n        return null;\r\n    }\r\n    // Handle phone Auth credential responses, as they have a different format\r\n    // from other backend responses (i.e. no providerId). This is also only the\r\n    // case for user credentials (does not work for errors).\r\n    if (!(object instanceof FirebaseError)) {\r\n        if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\r\n            return exp.PhoneAuthProvider.credentialFromResult(object);\r\n        }\r\n    }\r\n    const providerId = _tokenResponse.providerId;\r\n    // Email and password is not supported as there is no situation where the\r\n    // server would return the password to the client.\r\n    if (!providerId || providerId === exp.ProviderId.PASSWORD) {\r\n        return null;\r\n    }\r\n    let provider;\r\n    switch (providerId) {\r\n        case exp.ProviderId.GOOGLE:\r\n            provider = exp.GoogleAuthProvider;\r\n            break;\r\n        case exp.ProviderId.FACEBOOK:\r\n            provider = exp.FacebookAuthProvider;\r\n            break;\r\n        case exp.ProviderId.GITHUB:\r\n            provider = exp.GithubAuthProvider;\r\n            break;\r\n        case exp.ProviderId.TWITTER:\r\n            provider = exp.TwitterAuthProvider;\r\n            break;\r\n        default:\r\n            const { oauthIdToken, oauthAccessToken, oauthTokenSecret, pendingToken, nonce } = _tokenResponse;\r\n            if (!oauthAccessToken &&\r\n                !oauthTokenSecret &&\r\n                !oauthIdToken &&\r\n                !pendingToken) {\r\n                return null;\r\n            }\r\n            // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\r\n            if (pendingToken) {\r\n                if (providerId.startsWith('saml.')) {\r\n                    return exp.SAMLAuthCredential._create(providerId, pendingToken);\r\n                }\r\n                else {\r\n                    // OIDC and non-default providers excluding Twitter.\r\n                    return exp.OAuthCredential._fromParams({\r\n                        providerId,\r\n                        signInMethod: providerId,\r\n                        pendingToken,\r\n                        idToken: oauthIdToken,\r\n                        accessToken: oauthAccessToken\r\n                    });\r\n                }\r\n            }\r\n            return new exp.OAuthProvider(providerId).credential({\r\n                idToken: oauthIdToken,\r\n                accessToken: oauthAccessToken,\r\n                rawNonce: nonce\r\n            });\r\n    }\r\n    return object instanceof FirebaseError\r\n        ? provider.credentialFromError(object)\r\n        : provider.credentialFromResult(object);\r\n}\r\nfunction convertCredential(auth, credentialPromise) {\r\n    return credentialPromise\r\n        .catch(e => {\r\n        if (e instanceof FirebaseError) {\r\n            attachExtraErrorFields(auth, e);\r\n        }\r\n        throw e;\r\n    })\r\n        .then(credential => {\r\n        const operationType = credential.operationType;\r\n        const user = credential.user;\r\n        return {\r\n            operationType,\r\n            credential: credentialFromResponse(credential),\r\n            additionalUserInfo: exp.getAdditionalUserInfo(credential),\r\n            user: User.getOrCreate(user)\r\n        };\r\n    });\r\n}\r\nasync function convertConfirmationResult(auth, confirmationResultPromise) {\r\n    const confirmationResultExp = await confirmationResultPromise;\r\n    return {\r\n        verificationId: confirmationResultExp.verificationId,\r\n        confirm: (verificationCode) => convertCredential(auth, confirmationResultExp.confirm(verificationCode))\r\n    };\r\n}\r\nclass MultiFactorResolver {\r\n    constructor(auth, resolver) {\r\n        this.resolver = resolver;\r\n        this.auth = wrapped(auth);\r\n    }\r\n    get session() {\r\n        return this.resolver.session;\r\n    }\r\n    get hints() {\r\n        return this.resolver.hints;\r\n    }\r\n    resolveSignIn(assertion) {\r\n        return convertCredential(unwrap(this.auth), this.resolver.resolveSignIn(assertion));\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass User {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n        this.multiFactor = exp.multiFactor(_delegate);\r\n    }\r\n    static getOrCreate(user) {\r\n        if (!User.USER_MAP.has(user)) {\r\n            User.USER_MAP.set(user, new User(user));\r\n        }\r\n        return User.USER_MAP.get(user);\r\n    }\r\n    delete() {\r\n        return this._delegate.delete();\r\n    }\r\n    reload() {\r\n        return this._delegate.reload();\r\n    }\r\n    toJSON() {\r\n        return this._delegate.toJSON();\r\n    }\r\n    getIdTokenResult(forceRefresh) {\r\n        return this._delegate.getIdTokenResult(forceRefresh);\r\n    }\r\n    getIdToken(forceRefresh) {\r\n        return this._delegate.getIdToken(forceRefresh);\r\n    }\r\n    linkAndRetrieveDataWithCredential(credential) {\r\n        return this.linkWithCredential(credential);\r\n    }\r\n    async linkWithCredential(credential) {\r\n        return convertCredential(this.auth, exp.linkWithCredential(this._delegate, credential));\r\n    }\r\n    async linkWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, exp.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async linkWithPopup(provider) {\r\n        return convertCredential(this.auth, exp.linkWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async linkWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(exp._castAuth(this.auth));\r\n        return exp.linkWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    reauthenticateAndRetrieveDataWithCredential(credential) {\r\n        return this.reauthenticateWithCredential(credential);\r\n    }\r\n    async reauthenticateWithCredential(credential) {\r\n        return convertCredential(this.auth, exp.reauthenticateWithCredential(this._delegate, credential));\r\n    }\r\n    reauthenticateWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this.auth, exp.reauthenticateWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    reauthenticateWithPopup(provider) {\r\n        return convertCredential(this.auth, exp.reauthenticateWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async reauthenticateWithRedirect(provider) {\r\n        await _savePersistenceForRedirect(exp._castAuth(this.auth));\r\n        return exp.reauthenticateWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    sendEmailVerification(actionCodeSettings) {\r\n        return exp.sendEmailVerification(this._delegate, actionCodeSettings);\r\n    }\r\n    async unlink(providerId) {\r\n        await exp.unlink(this._delegate, providerId);\r\n        return this;\r\n    }\r\n    updateEmail(newEmail) {\r\n        return exp.updateEmail(this._delegate, newEmail);\r\n    }\r\n    updatePassword(newPassword) {\r\n        return exp.updatePassword(this._delegate, newPassword);\r\n    }\r\n    updatePhoneNumber(phoneCredential) {\r\n        return exp.updatePhoneNumber(this._delegate, phoneCredential);\r\n    }\r\n    updateProfile(profile) {\r\n        return exp.updateProfile(this._delegate, profile);\r\n    }\r\n    verifyBeforeUpdateEmail(newEmail, actionCodeSettings) {\r\n        return exp.verifyBeforeUpdateEmail(this._delegate, newEmail, actionCodeSettings);\r\n    }\r\n    get emailVerified() {\r\n        return this._delegate.emailVerified;\r\n    }\r\n    get isAnonymous() {\r\n        return this._delegate.isAnonymous;\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get phoneNumber() {\r\n        return this._delegate.phoneNumber;\r\n    }\r\n    get providerData() {\r\n        return this._delegate.providerData;\r\n    }\r\n    get refreshToken() {\r\n        return this._delegate.refreshToken;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    get displayName() {\r\n        return this._delegate.displayName;\r\n    }\r\n    get email() {\r\n        return this._delegate.email;\r\n    }\r\n    get photoURL() {\r\n        return this._delegate.photoURL;\r\n    }\r\n    get providerId() {\r\n        return this._delegate.providerId;\r\n    }\r\n    get uid() {\r\n        return this._delegate.uid;\r\n    }\r\n    get auth() {\r\n        return this._delegate.auth;\r\n    }\r\n}\r\n// Maintain a map so that there's always a 1:1 mapping between new User and\r\n// legacy compat users\r\nUser.USER_MAP = new WeakMap();\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert$1 = exp._assert;\r\nclass Auth {\r\n    constructor(app, provider) {\r\n        this.app = app;\r\n        if (provider.isInitialized()) {\r\n            this._delegate = provider.getImmediate();\r\n            this.linkUnderlyingAuth();\r\n            return;\r\n        }\r\n        const { apiKey } = app.options;\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* exp.AuthErrorCode.INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // TODO: platform needs to be determined using heuristics\r\n        _assert$1(apiKey, \"invalid-api-key\" /* exp.AuthErrorCode.INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        // Only use a popup/redirect resolver in browser environments\r\n        const resolver = typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\r\n        this._delegate = provider.initialize({\r\n            options: {\r\n                persistence: buildPersistenceHierarchy(apiKey, app.name),\r\n                popupRedirectResolver: resolver\r\n            }\r\n        });\r\n        this._delegate._updateErrorMap(exp.debugErrorMap);\r\n        this.linkUnderlyingAuth();\r\n    }\r\n    get emulatorConfig() {\r\n        return this._delegate.emulatorConfig;\r\n    }\r\n    get currentUser() {\r\n        if (!this._delegate.currentUser) {\r\n            return null;\r\n        }\r\n        return User.getOrCreate(this._delegate.currentUser);\r\n    }\r\n    get languageCode() {\r\n        return this._delegate.languageCode;\r\n    }\r\n    set languageCode(languageCode) {\r\n        this._delegate.languageCode = languageCode;\r\n    }\r\n    get settings() {\r\n        return this._delegate.settings;\r\n    }\r\n    get tenantId() {\r\n        return this._delegate.tenantId;\r\n    }\r\n    set tenantId(tid) {\r\n        this._delegate.tenantId = tid;\r\n    }\r\n    useDeviceLanguage() {\r\n        this._delegate.useDeviceLanguage();\r\n    }\r\n    signOut() {\r\n        return this._delegate.signOut();\r\n    }\r\n    useEmulator(url, options) {\r\n        exp.connectAuthEmulator(this._delegate, url, options);\r\n    }\r\n    applyActionCode(code) {\r\n        return exp.applyActionCode(this._delegate, code);\r\n    }\r\n    checkActionCode(code) {\r\n        return exp.checkActionCode(this._delegate, code);\r\n    }\r\n    confirmPasswordReset(code, newPassword) {\r\n        return exp.confirmPasswordReset(this._delegate, code, newPassword);\r\n    }\r\n    async createUserWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, exp.createUserWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    fetchProvidersForEmail(email) {\r\n        return this.fetchSignInMethodsForEmail(email);\r\n    }\r\n    fetchSignInMethodsForEmail(email) {\r\n        return exp.fetchSignInMethodsForEmail(this._delegate, email);\r\n    }\r\n    isSignInWithEmailLink(emailLink) {\r\n        return exp.isSignInWithEmailLink(this._delegate, emailLink);\r\n    }\r\n    async getRedirectResult() {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* exp.AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n        const credential = await exp.getRedirectResult(this._delegate, CompatPopupRedirectResolver);\r\n        if (!credential) {\r\n            return {\r\n                credential: null,\r\n                user: null\r\n            };\r\n        }\r\n        return convertCredential(this._delegate, Promise.resolve(credential));\r\n    }\r\n    // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n    // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\r\n    // out of autogenerated documentation pages to reduce accidental misuse.\r\n    addFrameworkForLogging(framework) {\r\n        exp.addFrameworkForLogging(this._delegate, framework);\r\n    }\r\n    onAuthStateChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onAuthStateChanged(next, error, complete);\r\n    }\r\n    onIdTokenChanged(nextOrObserver, errorFn, completed) {\r\n        const { next, error, complete } = wrapObservers(nextOrObserver, errorFn, completed);\r\n        return this._delegate.onIdTokenChanged(next, error, complete);\r\n    }\r\n    sendSignInLinkToEmail(email, actionCodeSettings) {\r\n        return exp.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\r\n    }\r\n    sendPasswordResetEmail(email, actionCodeSettings) {\r\n        return exp.sendPasswordResetEmail(this._delegate, email, actionCodeSettings || undefined);\r\n    }\r\n    async setPersistence(persistence) {\r\n        _validatePersistenceArgument(this._delegate, persistence);\r\n        let converted;\r\n        switch (persistence) {\r\n            case Persistence.SESSION:\r\n                converted = exp.browserSessionPersistence;\r\n                break;\r\n            case Persistence.LOCAL:\r\n                // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\r\n                const isIndexedDBFullySupported = await exp\r\n                    ._getInstance(exp.indexedDBLocalPersistence)\r\n                    ._isAvailable();\r\n                converted = isIndexedDBFullySupported\r\n                    ? exp.indexedDBLocalPersistence\r\n                    : exp.browserLocalPersistence;\r\n                break;\r\n            case Persistence.NONE:\r\n                converted = exp.inMemoryPersistence;\r\n                break;\r\n            default:\r\n                return exp._fail(\"argument-error\" /* exp.AuthErrorCode.ARGUMENT_ERROR */, {\r\n                    appName: this._delegate.name\r\n                });\r\n        }\r\n        return this._delegate.setPersistence(converted);\r\n    }\r\n    signInAndRetrieveDataWithCredential(credential) {\r\n        return this.signInWithCredential(credential);\r\n    }\r\n    signInAnonymously() {\r\n        return convertCredential(this._delegate, exp.signInAnonymously(this._delegate));\r\n    }\r\n    signInWithCredential(credential) {\r\n        return convertCredential(this._delegate, exp.signInWithCredential(this._delegate, credential));\r\n    }\r\n    signInWithCustomToken(token) {\r\n        return convertCredential(this._delegate, exp.signInWithCustomToken(this._delegate, token));\r\n    }\r\n    signInWithEmailAndPassword(email, password) {\r\n        return convertCredential(this._delegate, exp.signInWithEmailAndPassword(this._delegate, email, password));\r\n    }\r\n    signInWithEmailLink(email, emailLink) {\r\n        return convertCredential(this._delegate, exp.signInWithEmailLink(this._delegate, email, emailLink));\r\n    }\r\n    signInWithPhoneNumber(phoneNumber, applicationVerifier) {\r\n        return convertConfirmationResult(this._delegate, exp.signInWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\r\n    }\r\n    async signInWithPopup(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* exp.AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n        return convertCredential(this._delegate, exp.signInWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\r\n    }\r\n    async signInWithRedirect(provider) {\r\n        _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* exp.AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n        await _savePersistenceForRedirect(this._delegate);\r\n        return exp.signInWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\r\n    }\r\n    updateCurrentUser(user) {\r\n        // remove ts-ignore once overloads are defined for exp functions to accept compat objects\r\n        // @ts-ignore\r\n        return this._delegate.updateCurrentUser(user);\r\n    }\r\n    verifyPasswordResetCode(code) {\r\n        return exp.verifyPasswordResetCode(this._delegate, code);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n    _delete() {\r\n        return this._delegate._delete();\r\n    }\r\n    linkUnderlyingAuth() {\r\n        this._delegate.wrapped = () => this;\r\n    }\r\n}\r\nAuth.Persistence = Persistence;\r\nfunction wrapObservers(nextOrObserver, error, complete) {\r\n    let next = nextOrObserver;\r\n    if (typeof nextOrObserver !== 'function') {\r\n        ({ next, error, complete } = nextOrObserver);\r\n    }\r\n    // We know 'next' is now a function\r\n    const oldNext = next;\r\n    const newNext = (user) => oldNext(user && User.getOrCreate(user));\r\n    return {\r\n        next: newNext,\r\n        error: error,\r\n        complete\r\n    };\r\n}\r\nfunction buildPersistenceHierarchy(apiKey, appName) {\r\n    // Note this is slightly different behavior: in this case, the stored\r\n    // persistence is checked *first* rather than last. This is because we want\r\n    // to prefer stored persistence type in the hierarchy. This is an empty\r\n    // array if window is not available or there is no pending redirect\r\n    const persistences = _getPersistencesFromRedirect(apiKey, appName);\r\n    // If \"self\" is available, add indexedDB\r\n    if (typeof self !== 'undefined' &&\r\n        !persistences.includes(exp.indexedDBLocalPersistence)) {\r\n        persistences.push(exp.indexedDBLocalPersistence);\r\n    }\r\n    // If \"window\" is available, add HTML Storage persistences\r\n    if (typeof window !== 'undefined') {\r\n        for (const persistence of [\r\n            exp.browserLocalPersistence,\r\n            exp.browserSessionPersistence\r\n        ]) {\r\n            if (!persistences.includes(persistence)) {\r\n                persistences.push(persistence);\r\n            }\r\n        }\r\n    }\r\n    // Add in-memory as a final fallback\r\n    if (!persistences.includes(exp.inMemoryPersistence)) {\r\n        persistences.push(exp.inMemoryPersistence);\r\n    }\r\n    return persistences;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass PhoneAuthProvider {\r\n    constructor() {\r\n        this.providerId = 'phone';\r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        this._delegate = new exp.PhoneAuthProvider(unwrap(firebase.auth()));\r\n    }\r\n    static credential(verificationId, verificationCode) {\r\n        return exp.PhoneAuthProvider.credential(verificationId, verificationCode);\r\n    }\r\n    verifyPhoneNumber(phoneInfoOptions, applicationVerifier) {\r\n        return this._delegate.verifyPhoneNumber(\r\n        // The implementation matches but the types are subtly incompatible\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        phoneInfoOptions, applicationVerifier);\r\n    }\r\n    unwrap() {\r\n        return this._delegate;\r\n    }\r\n}\r\nPhoneAuthProvider.PHONE_SIGN_IN_METHOD = exp.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\r\nPhoneAuthProvider.PROVIDER_ID = exp.PhoneAuthProvider.PROVIDER_ID;\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst _assert = exp._assert;\r\nclass RecaptchaVerifier {\r\n    constructor(container, parameters, app = firebase.app()) {\r\n        var _a;\r\n        // API key is required for web client RPC calls.\r\n        _assert((_a = app.options) === null || _a === void 0 ? void 0 : _a.apiKey, \"invalid-api-key\" /* exp.AuthErrorCode.INVALID_API_KEY */, {\r\n            appName: app.name\r\n        });\r\n        this._delegate = new exp.RecaptchaVerifier(container, \r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        parameters, \r\n        // TODO: remove ts-ignore when moving types from auth-types to auth-compat\r\n        // @ts-ignore\r\n        app.auth());\r\n        this.type = this._delegate.type;\r\n    }\r\n    clear() {\r\n        this._delegate.clear();\r\n    }\r\n    render() {\r\n        return this._delegate.render();\r\n    }\r\n    verify() {\r\n        return this._delegate.verify();\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst AUTH_TYPE = 'auth-compat';\r\n// Create auth components to register with firebase.\r\n// Provides Auth public APIs.\r\nfunction registerAuthCompat(instance) {\r\n    instance.INTERNAL.registerComponent(new Component(AUTH_TYPE, container => {\r\n        // getImmediate for FirebaseApp will always succeed\r\n        const app = container.getProvider('app-compat').getImmediate();\r\n        const authProvider = container.getProvider('auth');\r\n        return new Auth(app, authProvider);\r\n    }, \"PUBLIC\" /* ComponentType.PUBLIC */)\r\n        .setServiceProps({\r\n        ActionCodeInfo: {\r\n            Operation: {\r\n                EMAIL_SIGNIN: exp.ActionCodeOperation.EMAIL_SIGNIN,\r\n                PASSWORD_RESET: exp.ActionCodeOperation.PASSWORD_RESET,\r\n                RECOVER_EMAIL: exp.ActionCodeOperation.RECOVER_EMAIL,\r\n                REVERT_SECOND_FACTOR_ADDITION: exp.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\r\n                VERIFY_AND_CHANGE_EMAIL: exp.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\r\n                VERIFY_EMAIL: exp.ActionCodeOperation.VERIFY_EMAIL\r\n            }\r\n        },\r\n        EmailAuthProvider: exp.EmailAuthProvider,\r\n        FacebookAuthProvider: exp.FacebookAuthProvider,\r\n        GithubAuthProvider: exp.GithubAuthProvider,\r\n        GoogleAuthProvider: exp.GoogleAuthProvider,\r\n        OAuthProvider: exp.OAuthProvider,\r\n        SAMLAuthProvider: exp.SAMLAuthProvider,\r\n        PhoneAuthProvider: PhoneAuthProvider,\r\n        PhoneMultiFactorGenerator: exp.PhoneMultiFactorGenerator,\r\n        RecaptchaVerifier: RecaptchaVerifier,\r\n        TwitterAuthProvider: exp.TwitterAuthProvider,\r\n        Auth,\r\n        AuthCredential: exp.AuthCredential,\r\n        Error: FirebaseError\r\n    })\r\n        .setInstantiationMode(\"LAZY\" /* InstantiationMode.LAZY */)\r\n        .setMultipleInstances(false));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterAuthCompat(firebase);\n","import { as as debugAssert, at as _isIOS, au as _isAndroid, av as _fail, aw as _getRedirectUrl, ax as _getProjectConfig, ay as _isIOS7Or8, az as _createError, aA as _assert, aB as AuthEventManager, aC as _getInstance, b as browserLocalPersistence, aD as _persistenceKeyName, a as browserSessionPersistence, aE as _getRedirectResult, aF as _overrideRedirectResult, aG as _clearRedirectOutcomes, aH as _castAuth } from './index-e3d5d3f4.js';\nexport { A as ActionCodeOperation, ag as ActionCodeURL, J as AuthCredential, G as AuthErrorCodes, aJ as AuthImpl, aM as AuthPopup, K as EmailAuthCredential, Q as EmailAuthProvider, U as FacebookAuthProvider, F as FactorId, aN as FetchProvider, W as GithubAuthProvider, V as GoogleAuthProvider, L as OAuthCredential, X as OAuthProvider, O as OperationType, M as PhoneAuthCredential, P as PhoneAuthProvider, m as PhoneMultiFactorGenerator, p as ProviderId, R as RecaptchaVerifier, aO as SAMLAuthCredential, Y as SAMLAuthProvider, S as SignInMethod, T as TotpMultiFactorGenerator, n as TotpSecret, Z as TwitterAuthProvider, aI as UserImpl, aA as _assert, aH as _castAuth, av as _fail, aL as _generateEventId, aK as _getClientVersion, aC as _getInstance, aE as _getRedirectResult, aF as _overrideRedirectResult, aD as _persistenceKeyName, a5 as applyActionCode, w as beforeAuthStateChanged, b as browserLocalPersistence, k as browserPopupRedirectResolver, a as browserSessionPersistence, a6 as checkActionCode, a4 as confirmPasswordReset, I as connectAuthEmulator, a8 as createUserWithEmailAndPassword, D as debugErrorMap, C as deleteUser, ad as fetchSignInMethodsForEmail, ao as getAdditionalUserInfo, o as getAuth, al as getIdToken, am as getIdTokenResult, aq as getMultiFactorResolver, j as getRedirectResult, N as inMemoryPersistence, i as indexedDBLocalPersistence, H as initializeAuth, t as initializeRecaptchaConfig, ab as isSignInWithEmailLink, a0 as linkWithCredential, l as linkWithPhoneNumber, d as linkWithPopup, g as linkWithRedirect, ar as multiFactor, x as onAuthStateChanged, v as onIdTokenChanged, ah as parseActionCodeURL, E as prodErrorMap, a1 as reauthenticateWithCredential, r as reauthenticateWithPhoneNumber, e as reauthenticateWithPopup, h as reauthenticateWithRedirect, ap as reload, ae as sendEmailVerification, a3 as sendPasswordResetEmail, aa as sendSignInLinkToEmail, q as setPersistence, _ as signInAnonymously, $ as signInWithCredential, a2 as signInWithCustomToken, a9 as signInWithEmailAndPassword, ac as signInWithEmailLink, s as signInWithPhoneNumber, c as signInWithPopup, f as signInWithRedirect, B as signOut, an as unlink, z as updateCurrentUser, aj as updateEmail, ak as updatePassword, u as updatePhoneNumber, ai as updateProfile, y as useDeviceLanguage, af as verifyBeforeUpdateEmail, a7 as verifyPasswordResetCode } from './index-e3d5d3f4.js';\nimport { querystringDecode } from '@firebase/util';\nimport '@firebase/app';\nimport 'tslib';\nimport '@firebase/logger';\nimport '@firebase/component';\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction _cordovaWindow() {\r\n    return window;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait after the app comes back into focus before concluding that\r\n * the user closed the sign in tab.\r\n */\r\nconst REDIRECT_TIMEOUT_MS = 2000;\r\n/**\r\n * Generates the URL for the OAuth handler.\r\n */\r\nasync function _generateHandlerUrl(auth, event, provider) {\r\n    var _a;\r\n    // Get the cordova plugins\r\n    const { BuildInfo } = _cordovaWindow();\r\n    debugAssert(event.sessionId, 'AuthEvent did not contain a session ID');\r\n    const sessionDigest = await computeSha256(event.sessionId);\r\n    const additionalParams = {};\r\n    if (_isIOS()) {\r\n        // iOS app identifier\r\n        additionalParams['ibi'] = BuildInfo.packageName;\r\n    }\r\n    else if (_isAndroid()) {\r\n        // Android app identifier\r\n        additionalParams['apn'] = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        _fail(auth, \"operation-not-supported-in-this-environment\" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Add the display name if available\r\n    if (BuildInfo.displayName) {\r\n        additionalParams['appDisplayName'] = BuildInfo.displayName;\r\n    }\r\n    // Attached the hashed session ID\r\n    additionalParams['sessionId'] = sessionDigest;\r\n    return _getRedirectUrl(auth, provider, event.type, undefined, (_a = event.eventId) !== null && _a !== void 0 ? _a : undefined, additionalParams);\r\n}\r\n/**\r\n * Validates that this app is valid for this project configuration\r\n */\r\nasync function _validateOrigin(auth) {\r\n    const { BuildInfo } = _cordovaWindow();\r\n    const request = {};\r\n    if (_isIOS()) {\r\n        request.iosBundleId = BuildInfo.packageName;\r\n    }\r\n    else if (_isAndroid()) {\r\n        request.androidPackageName = BuildInfo.packageName;\r\n    }\r\n    else {\r\n        _fail(auth, \"operation-not-supported-in-this-environment\" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    // Will fail automatically if package name is not authorized\r\n    await _getProjectConfig(auth, request);\r\n}\r\nfunction _performRedirect(handlerUrl) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    return new Promise(resolve => {\r\n        cordova.plugins.browsertab.isAvailable(browserTabIsAvailable => {\r\n            let iabRef = null;\r\n            if (browserTabIsAvailable) {\r\n                cordova.plugins.browsertab.openUrl(handlerUrl);\r\n            }\r\n            else {\r\n                // TODO: Return the inappbrowser ref that's returned from the open call\r\n                iabRef = cordova.InAppBrowser.open(handlerUrl, _isIOS7Or8() ? '_blank' : '_system', 'location=yes');\r\n            }\r\n            resolve(iabRef);\r\n        });\r\n    });\r\n}\r\n/**\r\n * This function waits for app activity to be seen before resolving. It does\r\n * this by attaching listeners to various dom events. Once the app is determined\r\n * to be visible, this promise resolves. AFTER that resolution, the listeners\r\n * are detached and any browser tabs left open will be closed.\r\n */\r\nasync function _waitForAppResume(auth, eventListener, iabRef) {\r\n    // Get the cordova plugins\r\n    const { cordova } = _cordovaWindow();\r\n    let cleanup = () => { };\r\n    try {\r\n        await new Promise((resolve, reject) => {\r\n            let onCloseTimer = null;\r\n            // DEFINE ALL THE CALLBACKS =====\r\n            function authEventSeen() {\r\n                var _a;\r\n                // Auth event was detected. Resolve this promise and close the extra\r\n                // window if it's still open.\r\n                resolve();\r\n                const closeBrowserTab = (_a = cordova.plugins.browsertab) === null || _a === void 0 ? void 0 : _a.close;\r\n                if (typeof closeBrowserTab === 'function') {\r\n                    closeBrowserTab();\r\n                }\r\n                // Close inappbrowser emebedded webview in iOS7 and 8 case if still\r\n                // open.\r\n                if (typeof (iabRef === null || iabRef === void 0 ? void 0 : iabRef.close) === 'function') {\r\n                    iabRef.close();\r\n                }\r\n            }\r\n            function resumed() {\r\n                if (onCloseTimer) {\r\n                    // This code already ran; do not rerun.\r\n                    return;\r\n                }\r\n                onCloseTimer = window.setTimeout(() => {\r\n                    // Wait two seeconds after resume then reject.\r\n                    reject(_createError(auth, \"redirect-cancelled-by-user\" /* AuthErrorCode.REDIRECT_CANCELLED_BY_USER */));\r\n                }, REDIRECT_TIMEOUT_MS);\r\n            }\r\n            function visibilityChanged() {\r\n                if ((document === null || document === void 0 ? void 0 : document.visibilityState) === 'visible') {\r\n                    resumed();\r\n                }\r\n            }\r\n            // ATTACH ALL THE LISTENERS =====\r\n            // Listen for the auth event\r\n            eventListener.addPassiveListener(authEventSeen);\r\n            // Listen for resume and visibility events\r\n            document.addEventListener('resume', resumed, false);\r\n            if (_isAndroid()) {\r\n                document.addEventListener('visibilitychange', visibilityChanged, false);\r\n            }\r\n            // SETUP THE CLEANUP FUNCTION =====\r\n            cleanup = () => {\r\n                eventListener.removePassiveListener(authEventSeen);\r\n                document.removeEventListener('resume', resumed, false);\r\n                document.removeEventListener('visibilitychange', visibilityChanged, false);\r\n                if (onCloseTimer) {\r\n                    window.clearTimeout(onCloseTimer);\r\n                }\r\n            };\r\n        });\r\n    }\r\n    finally {\r\n        cleanup();\r\n    }\r\n}\r\n/**\r\n * Checks the configuration of the Cordova environment. This has no side effect\r\n * if the configuration is correct; otherwise it throws an error with the\r\n * missing plugin.\r\n */\r\nfunction _checkCordovaConfiguration(auth) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n    const win = _cordovaWindow();\r\n    // Check all dependencies installed.\r\n    // https://github.com/nordnet/cordova-universal-links-plugin\r\n    // Note that cordova-universal-links-plugin has been abandoned.\r\n    // A fork with latest fixes is available at:\r\n    // https://www.npmjs.com/package/cordova-universal-links-plugin-fix\r\n    _assert(typeof ((_a = win === null || win === void 0 ? void 0 : win.universalLinks) === null || _a === void 0 ? void 0 : _a.subscribe) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-universal-links-plugin-fix'\r\n    });\r\n    // https://www.npmjs.com/package/cordova-plugin-buildinfo\r\n    _assert(typeof ((_b = win === null || win === void 0 ? void 0 : win.BuildInfo) === null || _b === void 0 ? void 0 : _b.packageName) !== 'undefined', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-buildInfo'\r\n    });\r\n    // https://github.com/google/cordova-plugin-browsertab\r\n    _assert(typeof ((_e = (_d = (_c = win === null || win === void 0 ? void 0 : win.cordova) === null || _c === void 0 ? void 0 : _c.plugins) === null || _d === void 0 ? void 0 : _d.browsertab) === null || _e === void 0 ? void 0 : _e.openUrl) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    _assert(typeof ((_h = (_g = (_f = win === null || win === void 0 ? void 0 : win.cordova) === null || _f === void 0 ? void 0 : _f.plugins) === null || _g === void 0 ? void 0 : _g.browsertab) === null || _h === void 0 ? void 0 : _h.isAvailable) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-browsertab'\r\n    });\r\n    // https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-inappbrowser/\r\n    _assert(typeof ((_k = (_j = win === null || win === void 0 ? void 0 : win.cordova) === null || _j === void 0 ? void 0 : _j.InAppBrowser) === null || _k === void 0 ? void 0 : _k.open) === 'function', auth, \"invalid-cordova-configuration\" /* AuthErrorCode.INVALID_CORDOVA_CONFIGURATION */, {\r\n        missingPlugin: 'cordova-plugin-inappbrowser'\r\n    });\r\n}\r\n/**\r\n * Computes the SHA-256 of a session ID. The SubtleCrypto interface is only\r\n * available in \"secure\" contexts, which covers Cordova (which is served on a file\r\n * protocol).\r\n */\r\nasync function computeSha256(sessionId) {\r\n    const bytes = stringToArrayBuffer(sessionId);\r\n    // TODO: For IE11 crypto has a different name and this operation comes back\r\n    //       as an object, not a promise. This is the old proposed standard that\r\n    //       is used by IE11:\r\n    // https://www.w3.org/TR/2013/WD-WebCryptoAPI-20130108/#cryptooperation-interface\r\n    const buf = await crypto.subtle.digest('SHA-256', bytes);\r\n    const arr = Array.from(new Uint8Array(buf));\r\n    return arr.map(num => num.toString(16).padStart(2, '0')).join('');\r\n}\r\nfunction stringToArrayBuffer(str) {\r\n    // This function is only meant to deal with an ASCII charset and makes\r\n    // certain simplifying assumptions.\r\n    debugAssert(/[0-9a-zA-Z]+/.test(str), 'Can only convert alpha-numeric strings');\r\n    if (typeof TextEncoder !== 'undefined') {\r\n        return new TextEncoder().encode(str);\r\n    }\r\n    const buff = new ArrayBuffer(str.length);\r\n    const view = new Uint8Array(buff);\r\n    for (let i = 0; i < str.length; i++) {\r\n        view[i] = str.charCodeAt(i);\r\n    }\r\n    return view;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst SESSION_ID_LENGTH = 20;\r\n/** Custom AuthEventManager that adds passive listeners to events */\r\nclass CordovaAuthEventManager extends AuthEventManager {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.passiveListeners = new Set();\r\n        this.initPromise = new Promise(resolve => {\r\n            this.resolveInialized = resolve;\r\n        });\r\n    }\r\n    addPassiveListener(cb) {\r\n        this.passiveListeners.add(cb);\r\n    }\r\n    removePassiveListener(cb) {\r\n        this.passiveListeners.delete(cb);\r\n    }\r\n    // In a Cordova environment, this manager can live through multiple redirect\r\n    // operations\r\n    resetRedirect() {\r\n        this.queuedRedirectEvent = null;\r\n        this.hasHandledPotentialRedirect = false;\r\n    }\r\n    /** Override the onEvent method */\r\n    onEvent(event) {\r\n        this.resolveInialized();\r\n        this.passiveListeners.forEach(cb => cb(event));\r\n        return super.onEvent(event);\r\n    }\r\n    async initialized() {\r\n        await this.initPromise;\r\n    }\r\n}\r\n/**\r\n * Generates a (partial) {@link AuthEvent}.\r\n */\r\nfunction _generateNewEvent(auth, type, eventId = null) {\r\n    return {\r\n        type,\r\n        eventId,\r\n        urlResponse: null,\r\n        sessionId: generateSessionId(),\r\n        postBody: null,\r\n        tenantId: auth.tenantId,\r\n        error: _createError(auth, \"no-auth-event\" /* AuthErrorCode.NO_AUTH_EVENT */)\r\n    };\r\n}\r\nfunction _savePartialEvent(auth, event) {\r\n    return storage()._set(persistenceKey(auth), event);\r\n}\r\nasync function _getAndRemoveEvent(auth) {\r\n    const event = (await storage()._get(persistenceKey(auth)));\r\n    if (event) {\r\n        await storage()._remove(persistenceKey(auth));\r\n    }\r\n    return event;\r\n}\r\nfunction _eventFromPartialAndUrl(partialEvent, url) {\r\n    var _a, _b;\r\n    // Parse the deep link within the dynamic link URL.\r\n    const callbackUrl = _getDeepLinkFromCallback(url);\r\n    // Confirm it is actually a callback URL.\r\n    // Currently the universal link will be of this format:\r\n    // https://<AUTH_DOMAIN>/__/auth/callback<OAUTH_RESPONSE>\r\n    // This is a fake URL but is not intended to take the user anywhere\r\n    // and just redirect to the app.\r\n    if (callbackUrl.includes('/__/auth/callback')) {\r\n        // Check if there is an error in the URL.\r\n        // This mechanism is also used to pass errors back to the app:\r\n        // https://<AUTH_DOMAIN>/__/auth/callback?firebaseError=<STRINGIFIED_ERROR>\r\n        const params = searchParamsOrEmpty(callbackUrl);\r\n        // Get the error object corresponding to the stringified error if found.\r\n        const errorObject = params['firebaseError']\r\n            ? parseJsonOrNull(decodeURIComponent(params['firebaseError']))\r\n            : null;\r\n        const code = (_b = (_a = errorObject === null || errorObject === void 0 ? void 0 : errorObject['code']) === null || _a === void 0 ? void 0 : _a.split('auth/')) === null || _b === void 0 ? void 0 : _b[1];\r\n        const error = code ? _createError(code) : null;\r\n        if (error) {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                error,\r\n                urlResponse: null,\r\n                sessionId: null,\r\n                postBody: null\r\n            };\r\n        }\r\n        else {\r\n            return {\r\n                type: partialEvent.type,\r\n                eventId: partialEvent.eventId,\r\n                tenantId: partialEvent.tenantId,\r\n                sessionId: partialEvent.sessionId,\r\n                urlResponse: callbackUrl,\r\n                postBody: null\r\n            };\r\n        }\r\n    }\r\n    return null;\r\n}\r\nfunction generateSessionId() {\r\n    const chars = [];\r\n    const allowedChars = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\r\n    for (let i = 0; i < SESSION_ID_LENGTH; i++) {\r\n        const idx = Math.floor(Math.random() * allowedChars.length);\r\n        chars.push(allowedChars.charAt(idx));\r\n    }\r\n    return chars.join('');\r\n}\r\nfunction storage() {\r\n    return _getInstance(browserLocalPersistence);\r\n}\r\nfunction persistenceKey(auth) {\r\n    return _persistenceKeyName(\"authEvent\" /* KeyName.AUTH_EVENT */, auth.config.apiKey, auth.name);\r\n}\r\nfunction parseJsonOrNull(json) {\r\n    try {\r\n        return JSON.parse(json);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\n// Exported for testing\r\nfunction _getDeepLinkFromCallback(url) {\r\n    const params = searchParamsOrEmpty(url);\r\n    const link = params['link'] ? decodeURIComponent(params['link']) : undefined;\r\n    // Double link case (automatic redirect)\r\n    const doubleDeepLink = searchParamsOrEmpty(link)['link'];\r\n    // iOS custom scheme links.\r\n    const iOSDeepLink = params['deep_link_id']\r\n        ? decodeURIComponent(params['deep_link_id'])\r\n        : undefined;\r\n    const iOSDoubleDeepLink = searchParamsOrEmpty(iOSDeepLink)['link'];\r\n    return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;\r\n}\r\n/**\r\n * Optimistically tries to get search params from a string, or else returns an\r\n * empty search params object.\r\n */\r\nfunction searchParamsOrEmpty(url) {\r\n    if (!(url === null || url === void 0 ? void 0 : url.includes('?'))) {\r\n        return {};\r\n    }\r\n    const [_, ...rest] = url.split('?');\r\n    return querystringDecode(rest.join('?'));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * How long to wait for the initial auth event before concluding no\r\n * redirect pending\r\n */\r\nconst INITIAL_EVENT_TIMEOUT_MS = 500;\r\nclass CordovaPopupRedirectResolver {\r\n    constructor() {\r\n        this._redirectPersistence = browserSessionPersistence;\r\n        this._shouldInitProactively = true; // This is lightweight for Cordova\r\n        this.eventManagers = new Map();\r\n        this.originValidationPromises = {};\r\n        this._completeRedirectFn = _getRedirectResult;\r\n        this._overrideRedirectResult = _overrideRedirectResult;\r\n    }\r\n    async _initialize(auth) {\r\n        const key = auth._key();\r\n        let manager = this.eventManagers.get(key);\r\n        if (!manager) {\r\n            manager = new CordovaAuthEventManager(auth);\r\n            this.eventManagers.set(key, manager);\r\n            this.attachCallbackListeners(auth, manager);\r\n        }\r\n        return manager;\r\n    }\r\n    _openPopup(auth) {\r\n        _fail(auth, \"operation-not-supported-in-this-environment\" /* AuthErrorCode.OPERATION_NOT_SUPPORTED */);\r\n    }\r\n    async _openRedirect(auth, provider, authType, eventId) {\r\n        _checkCordovaConfiguration(auth);\r\n        const manager = await this._initialize(auth);\r\n        await manager.initialized();\r\n        // Reset the persisted redirect states. This does not matter on Web where\r\n        // the redirect always blows away application state entirely. On Cordova,\r\n        // the app maintains control flow through the redirect.\r\n        manager.resetRedirect();\r\n        _clearRedirectOutcomes();\r\n        await this._originValidation(auth);\r\n        const event = _generateNewEvent(auth, authType, eventId);\r\n        await _savePartialEvent(auth, event);\r\n        const url = await _generateHandlerUrl(auth, event, provider);\r\n        const iabRef = await _performRedirect(url);\r\n        return _waitForAppResume(auth, manager, iabRef);\r\n    }\r\n    _isIframeWebStorageSupported(_auth, _cb) {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    _originValidation(auth) {\r\n        const key = auth._key();\r\n        if (!this.originValidationPromises[key]) {\r\n            this.originValidationPromises[key] = _validateOrigin(auth);\r\n        }\r\n        return this.originValidationPromises[key];\r\n    }\r\n    attachCallbackListeners(auth, manager) {\r\n        // Get the global plugins\r\n        const { universalLinks, handleOpenURL, BuildInfo } = _cordovaWindow();\r\n        const noEventTimeout = setTimeout(async () => {\r\n            // We didn't see that initial event. Clear any pending object and\r\n            // dispatch no event\r\n            await _getAndRemoveEvent(auth);\r\n            manager.onEvent(generateNoEvent());\r\n        }, INITIAL_EVENT_TIMEOUT_MS);\r\n        const universalLinksCb = async (eventData) => {\r\n            // We have an event so we can clear the no event timeout\r\n            clearTimeout(noEventTimeout);\r\n            const partialEvent = await _getAndRemoveEvent(auth);\r\n            let finalEvent = null;\r\n            if (partialEvent && (eventData === null || eventData === void 0 ? void 0 : eventData['url'])) {\r\n                finalEvent = _eventFromPartialAndUrl(partialEvent, eventData['url']);\r\n            }\r\n            // If finalEvent is never filled, trigger with no event\r\n            manager.onEvent(finalEvent || generateNoEvent());\r\n        };\r\n        // Universal links subscriber doesn't exist for iOS, so we need to check\r\n        if (typeof universalLinks !== 'undefined' &&\r\n            typeof universalLinks.subscribe === 'function') {\r\n            universalLinks.subscribe(null, universalLinksCb);\r\n        }\r\n        // iOS 7 or 8 custom URL schemes.\r\n        // This is also the current default behavior for iOS 9+.\r\n        // For this to work, cordova-plugin-customurlscheme needs to be installed.\r\n        // https://github.com/EddyVerbruggen/Custom-URL-scheme\r\n        // Do not overwrite the existing developer's URL handler.\r\n        const existingHandleOpenURL = handleOpenURL;\r\n        const packagePrefix = `${BuildInfo.packageName.toLowerCase()}://`;\r\n        _cordovaWindow().handleOpenURL = async (url) => {\r\n            if (url.toLowerCase().startsWith(packagePrefix)) {\r\n                // We want this intentionally to float\r\n                // eslint-disable-next-line @typescript-eslint/no-floating-promises\r\n                universalLinksCb({ url });\r\n            }\r\n            // Call the developer's handler if it is present.\r\n            if (typeof existingHandleOpenURL === 'function') {\r\n                try {\r\n                    existingHandleOpenURL(url);\r\n                }\r\n                catch (e) {\r\n                    // This is a developer error. Don't stop the flow of the SDK.\r\n                    console.error(e);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\r\n/**\r\n * An implementation of {@link PopupRedirectResolver} suitable for Cordova\r\n * based applications.\r\n *\r\n * @public\r\n */\r\nconst cordovaPopupRedirectResolver = CordovaPopupRedirectResolver;\r\nfunction generateNoEvent() {\r\n    return {\r\n        type: \"unknown\" /* AuthEventType.UNKNOWN */,\r\n        eventId: null,\r\n        sessionId: null,\r\n        urlResponse: null,\r\n        postBody: null,\r\n        tenantId: null,\r\n        error: _createError(\"no-auth-event\" /* AuthErrorCode.NO_AUTH_EVENT */)\r\n    };\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\r\n// It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it out\r\n// of autogenerated documentation pages to reduce accidental misuse.\r\nfunction addFrameworkForLogging(auth, framework) {\r\n    _castAuth(auth)._logFramework(framework);\r\n}\n\nexport { addFrameworkForLogging, cordovaPopupRedirectResolver };\n","import firebase from '@firebase/app-compat';\nimport { FirestoreError, Bytes, _isBase64Available, enableIndexedDbPersistence, enableMultiTabIndexedDbPersistence, clearIndexedDbPersistence, _DatabaseId, _logWarn, connectFirestoreEmulator, enableNetwork, disableNetwork, _validateIsNotUsedTogether, waitForPendingWrites, onSnapshotsInSync, collection, doc, collectionGroup, runTransaction, ensureFirestoreConfigured, WriteBatch as WriteBatch$1, executeWrite, loadBundle, namedQuery, DocumentSnapshot as DocumentSnapshot$1, DocumentReference as DocumentReference$1, _DocumentKey, refEqual, setDoc, updateDoc, deleteDoc, onSnapshot, getDocFromCache, getDocFromServer, getDoc, snapshotEqual, query, where, orderBy, limit, limitToLast, startAt, startAfter, endBefore, endAt, queryEqual, getDocsFromCache, getDocsFromServer, getDocs, QuerySnapshot as QuerySnapshot$1, addDoc, _cast, AbstractUserDataWriter, setLogLevel as setLogLevel$1, QueryDocumentSnapshot as QueryDocumentSnapshot$1, _debugAssert, FieldPath as FieldPath$1, _FieldPath, serverTimestamp, deleteField, arrayUnion, arrayRemove, increment, GeoPoint, Timestamp, CACHE_SIZE_UNLIMITED } from '@firebase/firestore';\nimport { getModularInstance } from '@firebase/util';\nimport { Component } from '@firebase/component';\n\nconst name = \"@firebase/firestore-compat\";\nconst version = \"0.3.12\";\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction validateSetOptions(methodName, options) {\r\n    if (options === undefined) {\r\n        return {\r\n            merge: false\r\n        };\r\n    }\r\n    if (options.mergeFields !== undefined && options.merge !== undefined) {\r\n        throw new FirestoreError('invalid-argument', `Invalid options passed to function ${methodName}(): You cannot ` +\r\n            'specify both \"merge\" and \"mergeFields\".');\r\n    }\r\n    return options;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/** Helper function to assert Uint8Array is available at runtime. */\r\nfunction assertUint8ArrayAvailable() {\r\n    if (typeof Uint8Array === 'undefined') {\r\n        throw new FirestoreError('unimplemented', 'Uint8Arrays are not available in this environment.');\r\n    }\r\n}\r\n/** Helper function to assert Base64 functions are available at runtime. */\r\nfunction assertBase64Available() {\r\n    if (!_isBase64Available()) {\r\n        throw new FirestoreError('unimplemented', 'Blobs are unavailable in Firestore in this environment.');\r\n    }\r\n}\r\n/** Immutable class holding a blob (binary data) */\r\nclass Blob {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n    }\r\n    static fromBase64String(base64) {\r\n        assertBase64Available();\r\n        return new Blob(Bytes.fromBase64String(base64));\r\n    }\r\n    static fromUint8Array(array) {\r\n        assertUint8ArrayAvailable();\r\n        return new Blob(Bytes.fromUint8Array(array));\r\n    }\r\n    toBase64() {\r\n        assertBase64Available();\r\n        return this._delegate.toBase64();\r\n    }\r\n    toUint8Array() {\r\n        assertUint8ArrayAvailable();\r\n        return this._delegate.toUint8Array();\r\n    }\r\n    isEqual(other) {\r\n        return this._delegate.isEqual(other._delegate);\r\n    }\r\n    toString() {\r\n        return 'Blob(base64: ' + this.toBase64() + ')';\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nfunction isPartialObserver(obj) {\r\n    return implementsAnyMethods(obj, ['next', 'error', 'complete']);\r\n}\r\n/**\r\n * Returns true if obj is an object and contains at least one of the specified\r\n * methods.\r\n */\r\nfunction implementsAnyMethods(obj, methods) {\r\n    if (typeof obj !== 'object' || obj === null) {\r\n        return false;\r\n    }\r\n    const object = obj;\r\n    for (const method of methods) {\r\n        if (method in object && typeof object[method] === 'function') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * The persistence provider included with the full Firestore SDK.\r\n */\r\nclass IndexedDbPersistenceProvider {\r\n    enableIndexedDbPersistence(firestore, forceOwnership) {\r\n        return enableIndexedDbPersistence(firestore._delegate, { forceOwnership });\r\n    }\r\n    enableMultiTabIndexedDbPersistence(firestore) {\r\n        return enableMultiTabIndexedDbPersistence(firestore._delegate);\r\n    }\r\n    clearIndexedDbPersistence(firestore) {\r\n        return clearIndexedDbPersistence(firestore._delegate);\r\n    }\r\n}\r\n/**\r\n * Compat class for Firestore. Exposes Firestore Legacy API, but delegates\r\n * to the functional API of firestore-exp.\r\n */\r\nclass Firestore {\r\n    constructor(databaseIdOrApp, _delegate, _persistenceProvider) {\r\n        this._delegate = _delegate;\r\n        this._persistenceProvider = _persistenceProvider;\r\n        this.INTERNAL = {\r\n            delete: () => this.terminate()\r\n        };\r\n        if (!(databaseIdOrApp instanceof _DatabaseId)) {\r\n            this._appCompat = databaseIdOrApp;\r\n        }\r\n    }\r\n    get _databaseId() {\r\n        return this._delegate._databaseId;\r\n    }\r\n    settings(settingsLiteral) {\r\n        const currentSettings = this._delegate._getSettings();\r\n        if (!settingsLiteral.merge &&\r\n            currentSettings.host !== settingsLiteral.host) {\r\n            _logWarn('You are overriding the original host. If you did not intend ' +\r\n                'to override your settings, use {merge: true}.');\r\n        }\r\n        if (settingsLiteral.merge) {\r\n            settingsLiteral = Object.assign(Object.assign({}, currentSettings), settingsLiteral);\r\n            // Remove the property from the settings once the merge is completed\r\n            delete settingsLiteral.merge;\r\n        }\r\n        this._delegate._setSettings(settingsLiteral);\r\n    }\r\n    useEmulator(host, port, options = {}) {\r\n        connectFirestoreEmulator(this._delegate, host, port, options);\r\n    }\r\n    enableNetwork() {\r\n        return enableNetwork(this._delegate);\r\n    }\r\n    disableNetwork() {\r\n        return disableNetwork(this._delegate);\r\n    }\r\n    enablePersistence(settings) {\r\n        let synchronizeTabs = false;\r\n        let experimentalForceOwningTab = false;\r\n        if (settings) {\r\n            synchronizeTabs = !!settings.synchronizeTabs;\r\n            experimentalForceOwningTab = !!settings.experimentalForceOwningTab;\r\n            _validateIsNotUsedTogether('synchronizeTabs', synchronizeTabs, 'experimentalForceOwningTab', experimentalForceOwningTab);\r\n        }\r\n        return synchronizeTabs\r\n            ? this._persistenceProvider.enableMultiTabIndexedDbPersistence(this)\r\n            : this._persistenceProvider.enableIndexedDbPersistence(this, experimentalForceOwningTab);\r\n    }\r\n    clearPersistence() {\r\n        return this._persistenceProvider.clearIndexedDbPersistence(this);\r\n    }\r\n    terminate() {\r\n        if (this._appCompat) {\r\n            this._appCompat._removeServiceInstance('firestore-compat');\r\n            this._appCompat._removeServiceInstance('firestore');\r\n        }\r\n        return this._delegate._delete();\r\n    }\r\n    waitForPendingWrites() {\r\n        return waitForPendingWrites(this._delegate);\r\n    }\r\n    onSnapshotsInSync(arg) {\r\n        return onSnapshotsInSync(this._delegate, arg);\r\n    }\r\n    get app() {\r\n        if (!this._appCompat) {\r\n            throw new FirestoreError('failed-precondition', \"Firestore was not initialized using the Firebase SDK. 'app' is \" +\r\n                'not available');\r\n        }\r\n        return this._appCompat;\r\n    }\r\n    collection(pathString) {\r\n        try {\r\n            return new CollectionReference(this, collection(this._delegate, pathString));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'collection()', 'Firestore.collection()');\r\n        }\r\n    }\r\n    doc(pathString) {\r\n        try {\r\n            return new DocumentReference(this, doc(this._delegate, pathString));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'doc()', 'Firestore.doc()');\r\n        }\r\n    }\r\n    collectionGroup(collectionId) {\r\n        try {\r\n            return new Query(this, collectionGroup(this._delegate, collectionId));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'collectionGroup()', 'Firestore.collectionGroup()');\r\n        }\r\n    }\r\n    runTransaction(updateFunction) {\r\n        return runTransaction(this._delegate, transaction => updateFunction(new Transaction(this, transaction)));\r\n    }\r\n    batch() {\r\n        ensureFirestoreConfigured(this._delegate);\r\n        return new WriteBatch(new WriteBatch$1(this._delegate, mutations => executeWrite(this._delegate, mutations)));\r\n    }\r\n    loadBundle(bundleData) {\r\n        return loadBundle(this._delegate, bundleData);\r\n    }\r\n    namedQuery(name) {\r\n        return namedQuery(this._delegate, name).then(expQuery => {\r\n            if (!expQuery) {\r\n                return null;\r\n            }\r\n            return new Query(this, \r\n            // We can pass `expQuery` here directly since named queries don't have a UserDataConverter.\r\n            // Otherwise, we would have to create a new ExpQuery and pass the old UserDataConverter.\r\n            expQuery);\r\n        });\r\n    }\r\n}\r\nclass UserDataWriter extends AbstractUserDataWriter {\r\n    constructor(firestore) {\r\n        super();\r\n        this.firestore = firestore;\r\n    }\r\n    convertBytes(bytes) {\r\n        return new Blob(new Bytes(bytes));\r\n    }\r\n    convertReference(name) {\r\n        const key = this.convertDocumentKey(name, this.firestore._databaseId);\r\n        return DocumentReference.forKey(key, this.firestore, /* converter= */ null);\r\n    }\r\n}\r\nfunction setLogLevel(level) {\r\n    setLogLevel$1(level);\r\n}\r\n/**\r\n * A reference to a transaction.\r\n */\r\nclass Transaction {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n        this._userDataWriter = new UserDataWriter(_firestore);\r\n    }\r\n    get(documentRef) {\r\n        const ref = castReference(documentRef);\r\n        return this._delegate\r\n            .get(ref)\r\n            .then(result => new DocumentSnapshot(this._firestore, new DocumentSnapshot$1(this._firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, ref.converter)));\r\n    }\r\n    set(documentRef, data, options) {\r\n        const ref = castReference(documentRef);\r\n        if (options) {\r\n            validateSetOptions('Transaction.set', options);\r\n            this._delegate.set(ref, data, options);\r\n        }\r\n        else {\r\n            this._delegate.set(ref, data);\r\n        }\r\n        return this;\r\n    }\r\n    update(documentRef, dataOrField, value, ...moreFieldsAndValues) {\r\n        const ref = castReference(documentRef);\r\n        if (arguments.length === 2) {\r\n            this._delegate.update(ref, dataOrField);\r\n        }\r\n        else {\r\n            this._delegate.update(ref, dataOrField, value, ...moreFieldsAndValues);\r\n        }\r\n        return this;\r\n    }\r\n    delete(documentRef) {\r\n        const ref = castReference(documentRef);\r\n        this._delegate.delete(ref);\r\n        return this;\r\n    }\r\n}\r\nclass WriteBatch {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n    }\r\n    set(documentRef, data, options) {\r\n        const ref = castReference(documentRef);\r\n        if (options) {\r\n            validateSetOptions('WriteBatch.set', options);\r\n            this._delegate.set(ref, data, options);\r\n        }\r\n        else {\r\n            this._delegate.set(ref, data);\r\n        }\r\n        return this;\r\n    }\r\n    update(documentRef, dataOrField, value, ...moreFieldsAndValues) {\r\n        const ref = castReference(documentRef);\r\n        if (arguments.length === 2) {\r\n            this._delegate.update(ref, dataOrField);\r\n        }\r\n        else {\r\n            this._delegate.update(ref, dataOrField, value, ...moreFieldsAndValues);\r\n        }\r\n        return this;\r\n    }\r\n    delete(documentRef) {\r\n        const ref = castReference(documentRef);\r\n        this._delegate.delete(ref);\r\n        return this;\r\n    }\r\n    commit() {\r\n        return this._delegate.commit();\r\n    }\r\n}\r\n/**\r\n * Wraps a `PublicFirestoreDataConverter` translating the types from the\r\n * experimental SDK into corresponding types from the Classic SDK before passing\r\n * them to the wrapped converter.\r\n */\r\nclass FirestoreDataConverter {\r\n    constructor(_firestore, _userDataWriter, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._userDataWriter = _userDataWriter;\r\n        this._delegate = _delegate;\r\n    }\r\n    fromFirestore(snapshot, options) {\r\n        const expSnapshot = new QueryDocumentSnapshot$1(this._firestore._delegate, this._userDataWriter, snapshot._key, snapshot._document, snapshot.metadata, \r\n        /* converter= */ null);\r\n        return this._delegate.fromFirestore(new QueryDocumentSnapshot(this._firestore, expSnapshot), options !== null && options !== void 0 ? options : {});\r\n    }\r\n    toFirestore(modelObject, options) {\r\n        if (!options) {\r\n            return this._delegate.toFirestore(modelObject);\r\n        }\r\n        else {\r\n            return this._delegate.toFirestore(modelObject, options);\r\n        }\r\n    }\r\n    // Use the same instance of `FirestoreDataConverter` for the given instances\r\n    // of `Firestore` and `PublicFirestoreDataConverter` so that isEqual() will\r\n    // compare equal for two objects created with the same converter instance.\r\n    static getInstance(firestore, converter) {\r\n        const converterMapByFirestore = FirestoreDataConverter.INSTANCES;\r\n        let untypedConverterByConverter = converterMapByFirestore.get(firestore);\r\n        if (!untypedConverterByConverter) {\r\n            untypedConverterByConverter = new WeakMap();\r\n            converterMapByFirestore.set(firestore, untypedConverterByConverter);\r\n        }\r\n        let instance = untypedConverterByConverter.get(converter);\r\n        if (!instance) {\r\n            instance = new FirestoreDataConverter(firestore, new UserDataWriter(firestore), converter);\r\n            untypedConverterByConverter.set(converter, instance);\r\n        }\r\n        return instance;\r\n    }\r\n}\r\nFirestoreDataConverter.INSTANCES = new WeakMap();\r\n/**\r\n * A reference to a particular document in a collection in the database.\r\n */\r\nclass DocumentReference {\r\n    constructor(firestore, _delegate) {\r\n        this.firestore = firestore;\r\n        this._delegate = _delegate;\r\n        this._userDataWriter = new UserDataWriter(firestore);\r\n    }\r\n    static forPath(path, firestore, converter) {\r\n        if (path.length % 2 !== 0) {\r\n            throw new FirestoreError('invalid-argument', 'Invalid document reference. Document ' +\r\n                'references must have an even number of segments, but ' +\r\n                `${path.canonicalString()} has ${path.length}`);\r\n        }\r\n        return new DocumentReference(firestore, new DocumentReference$1(firestore._delegate, converter, new _DocumentKey(path)));\r\n    }\r\n    static forKey(key, firestore, converter) {\r\n        return new DocumentReference(firestore, new DocumentReference$1(firestore._delegate, converter, key));\r\n    }\r\n    get id() {\r\n        return this._delegate.id;\r\n    }\r\n    get parent() {\r\n        return new CollectionReference(this.firestore, this._delegate.parent);\r\n    }\r\n    get path() {\r\n        return this._delegate.path;\r\n    }\r\n    collection(pathString) {\r\n        try {\r\n            return new CollectionReference(this.firestore, collection(this._delegate, pathString));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'collection()', 'DocumentReference.collection()');\r\n        }\r\n    }\r\n    isEqual(other) {\r\n        other = getModularInstance(other);\r\n        if (!(other instanceof DocumentReference$1)) {\r\n            return false;\r\n        }\r\n        return refEqual(this._delegate, other);\r\n    }\r\n    set(value, options) {\r\n        options = validateSetOptions('DocumentReference.set', options);\r\n        try {\r\n            if (options) {\r\n                return setDoc(this._delegate, value, options);\r\n            }\r\n            else {\r\n                return setDoc(this._delegate, value);\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'setDoc()', 'DocumentReference.set()');\r\n        }\r\n    }\r\n    update(fieldOrUpdateData, value, ...moreFieldsAndValues) {\r\n        try {\r\n            if (arguments.length === 1) {\r\n                return updateDoc(this._delegate, fieldOrUpdateData);\r\n            }\r\n            else {\r\n                return updateDoc(this._delegate, fieldOrUpdateData, value, ...moreFieldsAndValues);\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'updateDoc()', 'DocumentReference.update()');\r\n        }\r\n    }\r\n    delete() {\r\n        return deleteDoc(this._delegate);\r\n    }\r\n    onSnapshot(...args) {\r\n        const options = extractSnapshotOptions(args);\r\n        const observer = wrapObserver(args, result => new DocumentSnapshot(this.firestore, new DocumentSnapshot$1(this.firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, this._delegate.converter)));\r\n        return onSnapshot(this._delegate, options, observer);\r\n    }\r\n    get(options) {\r\n        let snap;\r\n        if ((options === null || options === void 0 ? void 0 : options.source) === 'cache') {\r\n            snap = getDocFromCache(this._delegate);\r\n        }\r\n        else if ((options === null || options === void 0 ? void 0 : options.source) === 'server') {\r\n            snap = getDocFromServer(this._delegate);\r\n        }\r\n        else {\r\n            snap = getDoc(this._delegate);\r\n        }\r\n        return snap.then(result => new DocumentSnapshot(this.firestore, new DocumentSnapshot$1(this.firestore._delegate, this._userDataWriter, result._key, result._document, result.metadata, this._delegate.converter)));\r\n    }\r\n    withConverter(converter) {\r\n        return new DocumentReference(this.firestore, converter\r\n            ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter))\r\n            : this._delegate.withConverter(null));\r\n    }\r\n}\r\n/**\r\n * Replaces the function name in an error thrown by the firestore-exp API\r\n * with the function names used in the classic API.\r\n */\r\nfunction replaceFunctionName(e, original, updated) {\r\n    e.message = e.message.replace(original, updated);\r\n    return e;\r\n}\r\n/**\r\n * Iterates the list of arguments from an `onSnapshot` call and returns the\r\n * first argument that may be an `SnapshotListenOptions` object. Returns an\r\n * empty object if none is found.\r\n */\r\nfunction extractSnapshotOptions(args) {\r\n    for (const arg of args) {\r\n        if (typeof arg === 'object' && !isPartialObserver(arg)) {\r\n            return arg;\r\n        }\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Creates an observer that can be passed to the firestore-exp SDK. The\r\n * observer converts all observed values into the format expected by the classic\r\n * SDK.\r\n *\r\n * @param args - The list of arguments from an `onSnapshot` call.\r\n * @param wrapper - The function that converts the firestore-exp type into the\r\n * type used by this shim.\r\n */\r\nfunction wrapObserver(args, wrapper) {\r\n    var _a, _b;\r\n    let userObserver;\r\n    if (isPartialObserver(args[0])) {\r\n        userObserver = args[0];\r\n    }\r\n    else if (isPartialObserver(args[1])) {\r\n        userObserver = args[1];\r\n    }\r\n    else if (typeof args[0] === 'function') {\r\n        userObserver = {\r\n            next: args[0],\r\n            error: args[1],\r\n            complete: args[2]\r\n        };\r\n    }\r\n    else {\r\n        userObserver = {\r\n            next: args[1],\r\n            error: args[2],\r\n            complete: args[3]\r\n        };\r\n    }\r\n    return {\r\n        next: val => {\r\n            if (userObserver.next) {\r\n                userObserver.next(wrapper(val));\r\n            }\r\n        },\r\n        error: (_a = userObserver.error) === null || _a === void 0 ? void 0 : _a.bind(userObserver),\r\n        complete: (_b = userObserver.complete) === null || _b === void 0 ? void 0 : _b.bind(userObserver)\r\n    };\r\n}\r\nclass DocumentSnapshot {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get ref() {\r\n        return new DocumentReference(this._firestore, this._delegate.ref);\r\n    }\r\n    get id() {\r\n        return this._delegate.id;\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get exists() {\r\n        return this._delegate.exists();\r\n    }\r\n    data(options) {\r\n        return this._delegate.data(options);\r\n    }\r\n    get(fieldPath, options\r\n    // We are using `any` here to avoid an explicit cast by our users.\r\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n    ) {\r\n        return this._delegate.get(fieldPath, options);\r\n    }\r\n    isEqual(other) {\r\n        return snapshotEqual(this._delegate, other._delegate);\r\n    }\r\n}\r\nclass QueryDocumentSnapshot extends DocumentSnapshot {\r\n    data(options) {\r\n        const data = this._delegate.data(options);\r\n        _debugAssert(data !== undefined, 'Document in a QueryDocumentSnapshot should exist');\r\n        return data;\r\n    }\r\n}\r\nclass Query {\r\n    constructor(firestore, _delegate) {\r\n        this.firestore = firestore;\r\n        this._delegate = _delegate;\r\n        this._userDataWriter = new UserDataWriter(firestore);\r\n    }\r\n    where(fieldPath, opStr, value) {\r\n        try {\r\n            // The \"as string\" cast is a little bit of a hack. `where` accepts the\r\n            // FieldPath Compat type as input, but is not typed as such in order to\r\n            // not expose this via our public typings file.\r\n            return new Query(this.firestore, query(this._delegate, where(fieldPath, opStr, value)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, /(orderBy|where)\\(\\)/, 'Query.$1()');\r\n        }\r\n    }\r\n    orderBy(fieldPath, directionStr) {\r\n        try {\r\n            // The \"as string\" cast is a little bit of a hack. `orderBy` accepts the\r\n            // FieldPath Compat type as input, but is not typed as such in order to\r\n            // not expose this via our public typings file.\r\n            return new Query(this.firestore, query(this._delegate, orderBy(fieldPath, directionStr)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, /(orderBy|where)\\(\\)/, 'Query.$1()');\r\n        }\r\n    }\r\n    limit(n) {\r\n        try {\r\n            return new Query(this.firestore, query(this._delegate, limit(n)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'limit()', 'Query.limit()');\r\n        }\r\n    }\r\n    limitToLast(n) {\r\n        try {\r\n            return new Query(this.firestore, query(this._delegate, limitToLast(n)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'limitToLast()', 'Query.limitToLast()');\r\n        }\r\n    }\r\n    startAt(...args) {\r\n        try {\r\n            return new Query(this.firestore, query(this._delegate, startAt(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'startAt()', 'Query.startAt()');\r\n        }\r\n    }\r\n    startAfter(...args) {\r\n        try {\r\n            return new Query(this.firestore, query(this._delegate, startAfter(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'startAfter()', 'Query.startAfter()');\r\n        }\r\n    }\r\n    endBefore(...args) {\r\n        try {\r\n            return new Query(this.firestore, query(this._delegate, endBefore(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'endBefore()', 'Query.endBefore()');\r\n        }\r\n    }\r\n    endAt(...args) {\r\n        try {\r\n            return new Query(this.firestore, query(this._delegate, endAt(...args)));\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'endAt()', 'Query.endAt()');\r\n        }\r\n    }\r\n    isEqual(other) {\r\n        return queryEqual(this._delegate, other._delegate);\r\n    }\r\n    get(options) {\r\n        let query;\r\n        if ((options === null || options === void 0 ? void 0 : options.source) === 'cache') {\r\n            query = getDocsFromCache(this._delegate);\r\n        }\r\n        else if ((options === null || options === void 0 ? void 0 : options.source) === 'server') {\r\n            query = getDocsFromServer(this._delegate);\r\n        }\r\n        else {\r\n            query = getDocs(this._delegate);\r\n        }\r\n        return query.then(result => new QuerySnapshot(this.firestore, new QuerySnapshot$1(this.firestore._delegate, this._userDataWriter, this._delegate, result._snapshot)));\r\n    }\r\n    onSnapshot(...args) {\r\n        const options = extractSnapshotOptions(args);\r\n        const observer = wrapObserver(args, snap => new QuerySnapshot(this.firestore, new QuerySnapshot$1(this.firestore._delegate, this._userDataWriter, this._delegate, snap._snapshot)));\r\n        return onSnapshot(this._delegate, options, observer);\r\n    }\r\n    withConverter(converter) {\r\n        return new Query(this.firestore, converter\r\n            ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter))\r\n            : this._delegate.withConverter(null));\r\n    }\r\n}\r\nclass DocumentChange {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get type() {\r\n        return this._delegate.type;\r\n    }\r\n    get doc() {\r\n        return new QueryDocumentSnapshot(this._firestore, this._delegate.doc);\r\n    }\r\n    get oldIndex() {\r\n        return this._delegate.oldIndex;\r\n    }\r\n    get newIndex() {\r\n        return this._delegate.newIndex;\r\n    }\r\n}\r\nclass QuerySnapshot {\r\n    constructor(_firestore, _delegate) {\r\n        this._firestore = _firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get query() {\r\n        return new Query(this._firestore, this._delegate.query);\r\n    }\r\n    get metadata() {\r\n        return this._delegate.metadata;\r\n    }\r\n    get size() {\r\n        return this._delegate.size;\r\n    }\r\n    get empty() {\r\n        return this._delegate.empty;\r\n    }\r\n    get docs() {\r\n        return this._delegate.docs.map(doc => new QueryDocumentSnapshot(this._firestore, doc));\r\n    }\r\n    docChanges(options) {\r\n        return this._delegate\r\n            .docChanges(options)\r\n            .map(docChange => new DocumentChange(this._firestore, docChange));\r\n    }\r\n    forEach(callback, thisArg) {\r\n        this._delegate.forEach(snapshot => {\r\n            callback.call(thisArg, new QueryDocumentSnapshot(this._firestore, snapshot));\r\n        });\r\n    }\r\n    isEqual(other) {\r\n        return snapshotEqual(this._delegate, other._delegate);\r\n    }\r\n}\r\nclass CollectionReference extends Query {\r\n    constructor(firestore, _delegate) {\r\n        super(firestore, _delegate);\r\n        this.firestore = firestore;\r\n        this._delegate = _delegate;\r\n    }\r\n    get id() {\r\n        return this._delegate.id;\r\n    }\r\n    get path() {\r\n        return this._delegate.path;\r\n    }\r\n    get parent() {\r\n        const docRef = this._delegate.parent;\r\n        return docRef ? new DocumentReference(this.firestore, docRef) : null;\r\n    }\r\n    doc(documentPath) {\r\n        try {\r\n            if (documentPath === undefined) {\r\n                // Call `doc` without `documentPath` if `documentPath` is `undefined`\r\n                // as `doc` validates the number of arguments to prevent users from\r\n                // accidentally passing `undefined`.\r\n                return new DocumentReference(this.firestore, doc(this._delegate));\r\n            }\r\n            else {\r\n                return new DocumentReference(this.firestore, doc(this._delegate, documentPath));\r\n            }\r\n        }\r\n        catch (e) {\r\n            throw replaceFunctionName(e, 'doc()', 'CollectionReference.doc()');\r\n        }\r\n    }\r\n    add(data) {\r\n        return addDoc(this._delegate, data).then(docRef => new DocumentReference(this.firestore, docRef));\r\n    }\r\n    isEqual(other) {\r\n        return refEqual(this._delegate, other._delegate);\r\n    }\r\n    withConverter(converter) {\r\n        return new CollectionReference(this.firestore, converter\r\n            ? this._delegate.withConverter(FirestoreDataConverter.getInstance(this.firestore, converter))\r\n            : this._delegate.withConverter(null));\r\n    }\r\n}\r\nfunction castReference(documentRef) {\r\n    return _cast(documentRef, DocumentReference$1);\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n// The objects that are a part of this API are exposed to third-parties as\r\n// compiled javascript so we want to flag our private members with a leading\r\n// underscore to discourage their use.\r\n/**\r\n * A `FieldPath` refers to a field in a document. The path may consist of a\r\n * single field name (referring to a top-level field in the document), or a list\r\n * of field names (referring to a nested field in the document).\r\n */\r\nclass FieldPath {\r\n    /**\r\n     * Creates a FieldPath from the provided field names. If more than one field\r\n     * name is provided, the path will point to a nested field in a document.\r\n     *\r\n     * @param fieldNames - A list of field names.\r\n     */\r\n    constructor(...fieldNames) {\r\n        this._delegate = new FieldPath$1(...fieldNames);\r\n    }\r\n    static documentId() {\r\n        /**\r\n         * Internal Note: The backend doesn't technically support querying by\r\n         * document ID. Instead it queries by the entire document name (full path\r\n         * included), but in the cases we currently support documentId(), the net\r\n         * effect is the same.\r\n         */\r\n        return new FieldPath(_FieldPath.keyField().canonicalString());\r\n    }\r\n    isEqual(other) {\r\n        other = getModularInstance(other);\r\n        if (!(other instanceof FieldPath$1)) {\r\n            return false;\r\n        }\r\n        return this._delegate._internalPath.isEqual(other._internalPath);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2017 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nclass FieldValue {\r\n    constructor(_delegate) {\r\n        this._delegate = _delegate;\r\n    }\r\n    static serverTimestamp() {\r\n        const delegate = serverTimestamp();\r\n        delegate._methodName = 'FieldValue.serverTimestamp';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static delete() {\r\n        const delegate = deleteField();\r\n        delegate._methodName = 'FieldValue.delete';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static arrayUnion(...elements) {\r\n        const delegate = arrayUnion(...elements);\r\n        delegate._methodName = 'FieldValue.arrayUnion';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static arrayRemove(...elements) {\r\n        const delegate = arrayRemove(...elements);\r\n        delegate._methodName = 'FieldValue.arrayRemove';\r\n        return new FieldValue(delegate);\r\n    }\r\n    static increment(n) {\r\n        const delegate = increment(n);\r\n        delegate._methodName = 'FieldValue.increment';\r\n        return new FieldValue(delegate);\r\n    }\r\n    isEqual(other) {\r\n        return this._delegate.isEqual(other._delegate);\r\n    }\r\n}\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\nconst firestoreNamespace = {\r\n    Firestore,\r\n    GeoPoint,\r\n    Timestamp,\r\n    Blob,\r\n    Transaction,\r\n    WriteBatch,\r\n    DocumentReference,\r\n    DocumentSnapshot,\r\n    Query,\r\n    QueryDocumentSnapshot,\r\n    QuerySnapshot,\r\n    CollectionReference,\r\n    FieldPath,\r\n    FieldValue,\r\n    setLogLevel,\r\n    CACHE_SIZE_UNLIMITED\r\n};\r\n/**\r\n * Configures Firestore as part of the Firebase SDK by calling registerComponent.\r\n *\r\n * @param firebase - The FirebaseNamespace to register Firestore with\r\n * @param firestoreFactory - A factory function that returns a new Firestore\r\n *    instance.\r\n */\r\nfunction configureForFirebase(firebase, firestoreFactory) {\r\n    firebase.INTERNAL.registerComponent(new Component('firestore-compat', container => {\r\n        const app = container.getProvider('app-compat').getImmediate();\r\n        const firestoreExp = container.getProvider('firestore').getImmediate();\r\n        return firestoreFactory(app, firestoreExp);\r\n    }, 'PUBLIC').setServiceProps(Object.assign({}, firestoreNamespace)));\r\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\r\n/**\r\n * Registers the main Firestore build with the components framework.\r\n * Persistence can be enabled via `firebase.firestore().enablePersistence()`.\r\n */\r\nfunction registerFirestore(instance) {\r\n    configureForFirebase(instance, (app, firestoreExp) => new Firestore(app, firestoreExp, new IndexedDbPersistenceProvider()));\r\n    instance.registerVersion(name, version);\r\n}\r\nregisterFirestore(firebase);\n\nexport { registerFirestore };\n","import { switchMap } from './switchMap';\nexport function switchMapTo(innerObservable, resultSelector) {\n    return resultSelector ? switchMap(() => innerObservable, resultSelector) : switchMap(() => innerObservable);\n}\n","import '@firebase/auth-compat';\n","import '@firebase/firestore-compat';\n"],"names":["i0","InjectionToken","PLATFORM_ID","Injectable","Inject","Optional","NgModule","Subject","of","Observable","from","merge","observeOn","switchMap","map","shareReplay","first","switchMapTo","subscribeOn","filter","i1","keepUnstableUntilFirst","VERSION","cacheInstance","firebaseAppFactory","lazySDKProxy","FIREBASE_OPTIONS","FIREBASE_APP_NAME","applyMixins","isPlatformServer","i2","firebase","proxyPolyfillCompat","name","config","emulatorConfig","app","applyActionCode","checkActionCode","confirmPasswordReset","createUserWithEmailAndPassword","currentUser","fetchSignInMethodsForEmail","isSignInWithEmailLink","getRedirectResult","languageCode","settings","onAuthStateChanged","onIdTokenChanged","sendSignInLinkToEmail","sendPasswordResetEmail","setPersistence","signInAndRetrieveDataWithCredential","signInAnonymously","signInWithCredential","signInWithCustomToken","signInWithEmailAndPassword","signInWithPhoneNumber","signInWithEmailLink","signInWithPopup","signInWithRedirect","signOut","tenantId","updateCurrentUser","useDeviceLanguage","useEmulator","verifyPasswordResetCode","USE_EMULATOR","SETTINGS","TENANT_ID","LANGUAGE_CODE","USE_DEVICE_LANGUAGE","PERSISTENCE","authFactory","zone","persistence","auth","runOutsideAngular","k","v","Object","entries","AngularFireAuth","constructor","options","platformId","schedulers","_appCheckInstances","logins","undefined","pipe","outsideAngular","bufferSize","refCount","authState","user","idToken","idTokenResult","credential","_","subscribe","redirectResult","then","it","authStateChanged","sub","unsubscribe","next","err","error","complete","idTokenChanged","insideAngular","getIdToken","getIdTokenResult","spy","apply","val","startsWith","fac","NgZone","AngularFireSchedulers","AppCheckInstances","prov","type","args","providedIn","decorators","AngularFireAuthModule","registerVersion","full","mod","inj","providers","asyncScheduler","startWith","pairwise","scan","distinctUntilChanged","USE_EMULATOR$1","SETTINGS$1","i3","_fromRef","ref","scheduler","subscriber","schedule","onSnapshot","includeMetadataChanges","fromRef","fromDocRef","priorPayload","payload","exists","fromCollectionRef","docChanges","query","priorAction","action","actions","change","JSON","stringify","metadata","docs","forEach","currentDoc","currentIndex","docChange","find","d","doc","isEqual","priorDoc","push","oldIndex","newIndex","sortedChanges","events","current","changes","combineChanges","c","indexOf","combineChange","sliceAndSplice","original","start","deleteCount","returnArray","slice","splice","combined","copiedArray","validateEventsArray","length","AngularFirestoreCollection","afs","stateChanges","source","prior","auditTrail","snapshotChanges","validatedEvents","scheduledSortedChanges$","valueChanges","a","idField","assign","data","id","get","add","path","AngularFirestoreDocument","set","update","delete","collection","queryFn","collectionRef","associateQuery","scheduledFromDocRef$","AngularFirestoreCollectionGroup","fromCollectionRefScheduled$","ENABLE_PERSISTENCE","PERSISTENCE_SETTINGS","AngularFirestore","shouldEnablePersistence","persistenceSettings","_useEmulator","useAuthEmulator","authSettings","firestore","persistenceEnabled$","enablePersistence","e","console","warn","pathOrRef","refInZone","ngZone","run","collectionGroup","collectionId","queryGroupFn","createId","AngularFirestoreModule","ngModule","provide","useValue","exp","Component","isBrowserExtension","getUA","isReactNative","isNode","isIndexedDBAvailable","isIE","FirebaseError","version","CORDOVA_ONDEVICEREADY_TIMEOUT_MS","_getCurrentScheme","_a","self","location","protocol","_isHttpOrHttps","_isAndroidOrIosCordovaScheme","ua","toLowerCase","match","_isNativeEnvironment","_isIe11","document","documentMode","_isEdge","test","_isLocalStorageNotSynchronized","_isWebStorageSupported","storage","localStorage","key","_generateEventId","_isWorker","global","_isPopupRedirectSupported","_isLikelyCordova","_isCordova","Promise","resolve","timeoutId","setTimeout","addEventListener","clearTimeout","_getSelfWindow","window","Persistence","LOCAL","NONE","SESSION","_assert$3","_assert","PERSISTENCE_KEY","_validatePersistenceArgument","values","includes","_savePersistenceForRedirect","_initializationPromise","session","getSessionStorageIfAvailable","_persistenceKeyName","apiKey","setItem","_getPersistence","_getPersistencesFromRedirect","appName","getItem","inMemoryPersistence","indexedDBLocalPersistence","browserSessionPersistence","sessionStorage","_assert$2","CompatPopupRedirectResolver","browserResolver","_getInstance","browserPopupRedirectResolver","cordovaResolver","cordovaPopupRedirectResolver","underlyingResolver","_redirectPersistence","_completeRedirectFn","_getRedirectResult","_overrideRedirectResult","_initialize","selectUnderlyingResolver","assertedUnderlyingResolver","_openPopup","provider","authType","eventId","_openRedirect","_isIframeWebStorageSupported","cb","_originValidation","_shouldInitProactively","isCordova","unwrap","object","wrapped","credentialFromResponse","userCredential","credentialFromObject","attachExtraErrorFields","response","customData","_tokenResponse","code","mfaErr","resolver","MultiFactorResolver","getMultiFactorResolver","credErr","email","phoneNumber","PhoneAuthProvider","credentialFromResult","providerId","ProviderId","PASSWORD","GOOGLE","GoogleAuthProvider","FACEBOOK","FacebookAuthProvider","GITHUB","GithubAuthProvider","TWITTER","TwitterAuthProvider","oauthIdToken","oauthAccessToken","oauthTokenSecret","pendingToken","nonce","SAMLAuthCredential","_create","OAuthCredential","_fromParams","signInMethod","accessToken","OAuthProvider","rawNonce","credentialFromError","convertCredential","credentialPromise","catch","operationType","additionalUserInfo","getAdditionalUserInfo","User","getOrCreate","convertConfirmationResult","confirmationResultPromise","confirmationResultExp","verificationId","confirm","verificationCode","hints","resolveSignIn","assertion","_delegate","multiFactor","USER_MAP","has","reload","toJSON","forceRefresh","linkAndRetrieveDataWithCredential","linkWithCredential","linkWithPhoneNumber","applicationVerifier","linkWithPopup","linkWithRedirect","_castAuth","reauthenticateAndRetrieveDataWithCredential","reauthenticateWithCredential","reauthenticateWithPhoneNumber","reauthenticateWithPopup","reauthenticateWithRedirect","sendEmailVerification","actionCodeSettings","unlink","updateEmail","newEmail","updatePassword","newPassword","updatePhoneNumber","phoneCredential","updateProfile","profile","verifyBeforeUpdateEmail","emailVerified","isAnonymous","providerData","refreshToken","displayName","photoURL","uid","WeakMap","_assert$1","Auth","isInitialized","getImmediate","linkUnderlyingAuth","initialize","buildPersistenceHierarchy","popupRedirectResolver","_updateErrorMap","debugErrorMap","tid","url","connectAuthEmulator","password","fetchProvidersForEmail","emailLink","addFrameworkForLogging","framework","nextOrObserver","errorFn","completed","wrapObservers","converted","isIndexedDBFullySupported","_isAvailable","browserLocalPersistence","_fail","token","_delete","oldNext","newNext","persistences","verifyPhoneNumber","phoneInfoOptions","PHONE_SIGN_IN_METHOD","PROVIDER_ID","RecaptchaVerifier","container","parameters","clear","render","verify","AUTH_TYPE","registerAuthCompat","instance","INTERNAL","registerComponent","getProvider","authProvider","setServiceProps","ActionCodeInfo","Operation","EMAIL_SIGNIN","ActionCodeOperation","PASSWORD_RESET","RECOVER_EMAIL","REVERT_SECOND_FACTOR_ADDITION","VERIFY_AND_CHANGE_EMAIL","VERIFY_EMAIL","EmailAuthProvider","SAMLAuthProvider","PhoneMultiFactorGenerator","AuthCredential","Error","setInstantiationMode","setMultipleInstances","as","debugAssert","at","_isIOS","au","_isAndroid","av","aw","_getRedirectUrl","ax","_getProjectConfig","ay","_isIOS7Or8","az","_createError","aA","aB","AuthEventManager","aC","b","aD","aE","aF","aG","_clearRedirectOutcomes","aH","A","ag","ActionCodeURL","J","G","AuthErrorCodes","aJ","AuthImpl","aM","AuthPopup","K","EmailAuthCredential","Q","U","F","FactorId","aN","FetchProvider","W","V","L","X","O","OperationType","M","PhoneAuthCredential","P","m","p","R","aO","Y","S","SignInMethod","T","TotpMultiFactorGenerator","n","TotpSecret","Z","aI","UserImpl","aL","aK","_getClientVersion","a5","w","beforeAuthStateChanged","a6","a4","I","a8","D","C","deleteUser","ad","ao","o","getAuth","al","am","aq","j","N","i","H","initializeAuth","t","initializeRecaptchaConfig","ab","a0","l","g","ar","x","ah","parseActionCodeURL","E","prodErrorMap","a1","r","h","ap","ae","a3","aa","q","$","a2","a9","ac","s","f","B","an","z","aj","ak","u","ai","y","af","a7","querystringDecode","_cordovaWindow","REDIRECT_TIMEOUT_MS","_generateHandlerUrl","event","BuildInfo","sessionId","sessionDigest","computeSha256","additionalParams","packageName","_validateOrigin","request","iosBundleId","androidPackageName","_performRedirect","handlerUrl","cordova","plugins","browsertab","isAvailable","browserTabIsAvailable","iabRef","openUrl","InAppBrowser","open","_waitForAppResume","eventListener","cleanup","reject","onCloseTimer","authEventSeen","closeBrowserTab","close","resumed","visibilityChanged","visibilityState","addPassiveListener","removePassiveListener","removeEventListener","_checkCordovaConfiguration","_b","_c","_d","_e","_f","_g","_h","_j","_k","win","universalLinks","missingPlugin","bytes","stringToArrayBuffer","buf","crypto","subtle","digest","arr","Array","Uint8Array","num","toString","padStart","join","str","TextEncoder","encode","buff","ArrayBuffer","view","charCodeAt","SESSION_ID_LENGTH","CordovaAuthEventManager","arguments","passiveListeners","Set","initPromise","resolveInialized","resetRedirect","queuedRedirectEvent","hasHandledPotentialRedirect","onEvent","initialized","_generateNewEvent","urlResponse","generateSessionId","postBody","_savePartialEvent","_set","persistenceKey","_getAndRemoveEvent","_get","_remove","_eventFromPartialAndUrl","partialEvent","callbackUrl","_getDeepLinkFromCallback","params","searchParamsOrEmpty","errorObject","parseJsonOrNull","decodeURIComponent","split","chars","allowedChars","idx","Math","floor","random","charAt","json","parse","link","doubleDeepLink","iOSDeepLink","iOSDoubleDeepLink","rest","INITIAL_EVENT_TIMEOUT_MS","CordovaPopupRedirectResolver","eventManagers","Map","originValidationPromises","_key","manager","attachCallbackListeners","_auth","_cb","handleOpenURL","noEventTimeout","generateNoEvent","universalLinksCb","eventData","finalEvent","existingHandleOpenURL","packagePrefix","_logFramework"],"sourceRoot":"webpack:///"}