{"version":3,"file":"default-src_app_pages_secure_payment_payment_page_ts.js","mappings":"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","sources":["./src/app/pages/secure/payment/payment.page.html","./src/app/pages/secure/qr-code/qr-code.page.html","./src/app/models/file-upload.model.ts","./src/app/pages/secure/payment/payment.page.ts","./src/app/pages/secure/qr-code/qr-code.page.ts"],"sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-button (click)=\\\"cancel()\\\">\\n                Cancel\\n            </ion-button>\\n        </ion-buttons>\\n        <ion-title>\\n            Checkout\\n        </ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n    <form [formGroup]=\\\"paymentForm\\\" (ngSubmit)=\\\"addPlayerToGame(this.game.id)\\\">\\n\\n        <div class=\\\"ion-text-center\\\">\\n            <ion-chip color=\\\"light\\\">Game Details</ion-chip>\\n\\n            <div class=\\\"ion-text-center\\\">\\n                <ion-text color=\\\"light\\\" style=\\\"margin-top: 10px\\\">\\n                    <ion-icon name=\\\"location\\\"></ion-icon>\\n                    Location: {{ this.game.location }}\\n                    <br>\\n                </ion-text>\\n            </div>\\n\\n            <div class=\\\"ion-text-center\\\">\\n                <ion-text color=\\\"light\\\" style=\\\"margin-top: 10px\\\">\\n                    <ion-icon name=\\\"calendar-outline\\\"></ion-icon>\\n                    Date: {{ this.game.date }}\\n                    <br>\\n                </ion-text>\\n            </div>\\n\\n            <div class=\\\"ion-text-center\\\">\\n                <ion-text color=\\\"light\\\" style=\\\"margin-top: 10px\\\">\\n                    <ion-icon name=\\\"time-outline\\\"></ion-icon>\\n                    Time: {{ this.game.time }}\\n                    <br>\\n                </ion-text>\\n            </div>\\n\\n            <br>\\n\\n            <ion-chip color=\\\"light\\\">Add Friends if any</ion-chip>\\n\\n            <!-- List of friends -->\\n            <ion-list *ngFor=\\\"let friend of friends; let i = index\\\">\\n                <ion-item>\\n                    <ion-label position=\\\"floating\\\">Friend {{ i + 1 }}</ion-label>\\n                    <ion-input [value]=\\\"friend.name\\\" (input)=\\\"updateFriendName(i, $event.target.value)\\\"\\n                               name=\\\"friendName{{ i }}\\\" placeholder=\\\"Input friend name\\\" required\\n                               [clearInput]=\\\"true\\\"></ion-input>\\n                    <ion-button fill=\\\"clear\\\" color=\\\"danger\\\" (click)=\\\"removeFriend(i)\\\">\\n                        <ion-icon name=\\\"close-circle\\\"></ion-icon>\\n                        Remove\\n                    </ion-button>\\n                </ion-item>\\n            </ion-list>\\n\\n            <br>\\n\\n            <ion-button *ngIf=\\\"this.spotsLeft != 1\\\" (click)=\\\"addFriendButton()\\\" style=\\\"margin-top: 10px;\\\">Add Friend\\n            </ion-button>\\n\\n            <!--  If spotsLeft == 1, which means - only him available, then hide this button  -->\\n            <ion-button *ngIf=\\\"this.spotsLeft == 1\\\" [disabled]=\\\"true\\\" style=\\\"margin-top: 10px;\\\">Not Allowed</ion-button>\\n\\n            <br> <br>\\n\\n            <ion-chip color=\\\"light\\\">Price</ion-chip>\\n\\n            <div class=\\\"ion-text-center\\\">\\n                <ion-text color=\\\"light\\\" style=\\\"margin-top: 10px\\\">\\n                    <ion-icon name=\\\"cash-outline\\\"></ion-icon>\\n                    You will be paying: {{ this.game.price }} per person.\\n                    <br>\\n                </ion-text>\\n            </div>\\n\\n            <br>\\n\\n            <div *ngIf=\\\"friends.length > 0\\\">\\n                <div class=\\\"ion-text-center\\\">\\n                    <ion-text color=\\\"light\\\" style=\\\"margin-top: 10px\\\">\\n                        <ion-icon name=\\\"cash-outline\\\"></ion-icon>\\n                        Total calculated price would be: RM{{ this.calculatedFees }} which includes yours as well.\\n                        <br>\\n                    </ion-text>\\n                </div>\\n            </div>\\n\\n            <br>\\n\\n            <ion-chip color=\\\"light\\\">Payment Method</ion-chip>\\n\\n            <div class=\\\"ion-text-center\\\">\\n\\n                <input style=\\\"margin-bottom: 10px\\\" type=\\\"file\\\" class=\\\"text-nowrap text-truncate\\\" style=\\\"margin: 15px\\\"\\n                       (change)=\\\"selectFile($event)\\\">\\n\\n                <ion-row style=\\\"margin-top: 10px\\\" class=\\\"ion-justify-content-center\\\">\\n\\n                    <ion-button (click)=\\\"upload()\\\" size=\\\"small\\\" color=\\\"success\\\" style=\\\"margin-right: 5px;\\\">\\n                        Upload\\n                    </ion-button>\\n                    <ion-button (click)=\\\"openQrCodeModal()\\\" size=\\\"small\\\" color=\\\"light\\\">\\n                        View Qr Code\\n                    </ion-button>\\n                </ion-row>\\n\\n                <br>\\n                <ion-text color=\\\"light\\\">\\n                    Upload a receipt of DuitNow Receipt and our system will verify the payment.\\n                </ion-text>\\n            </div>\\n\\n\\n        </div>\\n\\n        <div style=\\\"margin-top: 20px; display: flex; align-items: center; margin-left: 10px\\\">\\n            <ion-checkbox formControlName=\\\"agree\\\" color=\\\"light\\\" style=\\\"margin-right: 8px;\\\"></ion-checkbox>\\n            <ion-text color=\\\"light\\\">\\n                <small>I have read and accept the\\n                    <a href=\\\"https://docs.google.com/document/d/176yd1FKoLXZYo448uO8-zss47EQ9ljuaX756M-IAObY/edit?usp=sharing\\\" target=\\\"_blank\\\">\\n                        Terms & Conditions\\n                    </a>\\n                    and\\n                    <a href=\\\"https://docs.google.com/document/d/1rnCh_X1zBIJcypzwh3G2axpfBqYirPAoKM2uXfoGQrg/edit?usp=sharing\\\" target=\\\"_blank\\\">\\n                        Privacy Policy\\n                    </a>\\n                </small>\\n            </ion-text>\\n        </div>\\n\\n        <div class=\\\"ion-text-center\\\" style=\\\"margin-top: 20px\\\">\\n            <ion-button color=\\\"danger\\\" type=\\\"submit\\\" [disabled]=\\\"!paymentForm.valid\\\">\\n                Pay Now\\n            </ion-button>\\n        </div>\\n\\n\\n    </form>\\n</ion-content>\\n\";","export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-button (click)=\\\"close()\\\">\\n                Close\\n            </ion-button>\\n        </ion-buttons>\\n        <ion-title>\\n            DuitNow QR Code\\n        </ion-title>\\n    </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n    <img src=\\\"https://firebasestorage.googleapis.com/v0/b/futbuddy-kl.appspot.com/o/qr-code%2FFutBuddy%20QR%20Code.jpg?alt=media&token=12a03de5-8576-4435-a3d9-64a28564127c\\\"\\n         alt=\\\"QR Code\\\">\\n\\n    <div class=\\\"ion-text-center\\\">\\n        <ion-button color=\\\"light\\\" (click)=\\\"close()\\\" style=\\\"margin-top: 20px\\\">Close</ion-button>\\n    </div>\\n\\n</ion-content>\\n\";","export class FileUpload {\r\n    key!: string;\r\n    name!: string;\r\n    url!: string;\r\n    file: File;\r\n\r\n    constructor(file: File) {\r\n        this.file = file;\r\n    }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController, NavParams } from \"@ionic/angular\";\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\nimport { AngularFirestore } from \"@angular/fire/compat/firestore\";\nimport { Auth, user } from \"@angular/fire/auth\";\nimport { Subscription } from \"rxjs\";\nimport firebase from \"firebase/compat\";\nimport { ToastService } from \"../../../services/toast/toast.service\";\nimport { QrCodePage } from \"../qr-code/qr-code.page\";\nimport { FileUpload } from \"../../../models/file-upload.model\";\nimport User = firebase.User;\n\n@Component({\n    selector: 'app-payment',\n    templateUrl: './payment.page.html',\n    styleUrls: ['./payment.page.scss'],\n})\nexport class PaymentPage implements OnInit {\n\n    game: any\n    username: string\n\n    friends: any[] = []; // Initialize it as an empty array\n\n    user$ = user(this.auth);\n    userSubscription: Subscription;\n\n    paymentForm: FormGroup;\n\n    calculatedFees: number = 0\n    spotsLeft: number = 0\n\n    // PDF Upload Images\n    selectedImage: any; // to store the image locally\n    uploadPercent: any; // for the progress bar\n    imagePreview: string; // to store the base64 encoded preview\n\n    // PDF bezkover Upload Files\n    selectedFiles?: FileList;\n    currentFileUpload?: FileUpload;\n    percentage = 0;\n\n    constructor(\n        private modalController: ModalController,\n        private formBuilder: FormBuilder,\n        private navParams: NavParams,\n        private firestore: AngularFirestore,\n        private auth: Auth,\n        private toastService: ToastService\n    ) {\n\n        this.paymentForm = this.formBuilder.group({\n            agree: [false, Validators.requiredTrue],\n        });\n\n        // Retrieve username from Firebase Auth displayName field\n        this.userSubscription = this.user$.subscribe((aUser: User | null) => {\n            this.username = aUser.displayName\n        })\n\n    }\n\n    async ngOnInit() {\n\n        // Retrieve the 'game' object passed from the calling component\n        this.game = this.navParams.get('game');\n\n        // Retrieve the 'spotsLeft' object passed from the calling component\n        this.spotsLeft = this.navParams.get('spotsLeft');\n\n        console.log('THE SPOTS LEFT:', this.spotsLeft)\n\n        // Initialise calculatedFees first\n        this.calculatedFees = this.extractNumberFromPrice(this.game.price)\n\n    }\n\n    cancel() {\n\n        // Dismiss modal\n        this.modalController.dismiss();\n    }\n\n    updateFriendName(index: number, newName: string) {\n\n        console.log('Index position: ', index)\n\n        // Set the friends array object name - with onChange input\n        if (this.friends[index]) {\n            this.friends[index].name = newName;\n        }\n\n        console.log('The friends array object: ', this.friends)\n\n    }\n\n\n    async addPlayerToGame(gameId: any) {\n\n        // Validation steps for not empty array in friends array\n        if (this.checkFriendNames()) {\n            await this.toastService.presentToast('Error', 'Please input friend name', 'top', 'danger', 2000);\n            return\n        }\n\n        // If payment form is valid, proceed\n        if (this.paymentForm.valid) {\n\n            console.log('Total friends: ', this.friends)\n\n            console.log('THIS GAME ID:::', gameId)\n\n            // TODO:: Make payment system gateway here - to finish off the deal. Make payment processing here first to book slot\n\n            try {\n\n                // Retrieve game reference object\n                const gameRef = this.firestore.collection('games').doc(gameId);\n                const playerListRef = gameRef.collection('playerList');\n\n                // TODO:: Have to set paymentStatus == PAID once Stripe payment is released.\n\n                // This is for Personal User Setting - his own account to be added\n                const playerData = {\n                    playerName: this.username,\n                    timestamp: new Date(),\n                    paymentStatus: 'PAID'\n                };\n\n                await playerListRef.add(playerData);\n\n                // If there are some friends involved;\n                if (this.friends.length > 0) {\n\n                    // Iterate through the friends array\n                    for (const friend of this.friends) {\n\n                        // Create a friend object for each friend\n                        const friendData = {\n                            playerName: friend.name,\n                            timestamp: new Date(),\n                            paymentStatus: 'PAID'\n                        };\n\n                        // Add the friend object to the 'playerList' collection\n                        await playerListRef.add(friendData);\n                    }\n\n                }\n\n                await this.toastService.presentToast('Players Added Successfully', `Players has been added to the session.`, 'top', 'success', 3500);\n\n                // Dismiss modal\n                await this.modalController.dismiss();\n\n            } catch (error) {\n                console.error('Error adding player to game: ', error);\n            }\n\n        }\n\n\n    }\n\n    addFriendButton() {\n\n        // Add an empty friend object to the friends array\n        this.friends.push(\n            {\n                name: '',\n                timestamp: new Date()\n            }\n        );\n\n        // Calculate the total price and update calculatedFees\n        this.calculatedFees = this.calculateTotalPrice();\n\n        // Minus the spotsLeft variable by one\n        this.spotsLeft--;\n    }\n\n    removeFriend(index: number) {\n\n        this.friends.splice(index, 1);\n\n        console.log('This.friends.length: ', this.friends.length)\n\n        // Calculate the total price and update calculatedFees\n        this.calculatedFees = this.calculateTotalPrice();\n\n        // Add the spotsLeft variable by one\n        this.spotsLeft++;\n    }\n\n    checkFriendNames(): boolean {\n        for (const friend of this.friends) {\n            if (!friend.name || friend.name.trim() === '') {\n                return true; // At least one friend's name is empty\n            }\n        }\n        return false; // All friend names are filled\n    }\n\n    calculateTotalPrice(): number {\n\n        const basePrice = this.extractNumberFromPrice(this.game.price);\n\n        if (this.friends.length > 0) {\n            this.calculatedFees = basePrice * (1 + this.friends.length);\n        } else {\n            this.calculatedFees = basePrice; // Set it to the base price if no friends are added\n        }\n\n        return this.calculatedFees;\n    }\n\n    // Function to extract the numeric part from a string like 'RM25'\n    extractNumberFromPrice(priceString: string): number {\n        // Use regex to match the numeric part of the string\n        const match = priceString.match(/\\d+/);\n\n        // If a match is found, parse it to an integer; otherwise, return 0\n        return match ? parseInt(match[0], 10) : 0;\n    }\n\n    async openQrCodeModal() {\n\n        console.log('open open')\n\n        // Open filter modal\n        const modal = await this.modalController.create({\n            component: QrCodePage,\n            swipeToClose: true,\n        });\n\n        return await modal.present();\n\n    }\n\n    onImageChange(event: any) {\n        const reader = new FileReader();\n\n        if (event.target.files && event.target.files[0]) {\n            const file = event.target.files[0];\n            this.selectedImage = file; // Store the actual file object for uploading\n\n            console.log(\"Image loaded:\", this.selectedImage.name); // Log the name of the loaded image\n\n            reader.readAsDataURL(file);\n\n            reader.onload = () => {\n                this.imagePreview = reader.result as string;  // Set the base64 encoded preview\n            };\n        }\n    }\n\n    selectFile(event: any): void {\n        this.selectedFiles = event.target.files;\n        console.log('this.selectedFiles', this.selectedFiles)\n    }\n\n    async upload(): Promise<void> {\n        if (this.selectedFiles) {\n            const file: File | null = this.selectedFiles.item(0);\n\n            if (file) {\n                this.currentFileUpload = new FileUpload(file);\n\n                console.log('the currenty file upload', this.currentFileUpload)\n\n                const filePath = '/uploads-receipts/' + file.name; // Set the desired storage path\n\n                console.log('filepath', filePath)\n\n                // const newImageRef = ref(this.storage, filePath);\n                //\n                // console.log(newImageRef)\n                //\n                // const fileSnapshot = await uploadBytesResumable(newImageRef, file);\n                //\n                // console.log('filesnapshot', fileSnapshot)\n                //\n                // debugger\n\n                // const fileRef = this.storage.ref(filePath);\n                //\n                // // Upload the file to Firebase Storage\n                // const task = fileRef.put(file);\n                //\n                // // Track the upload progress\n                // task.percentageChanges().subscribe(percentage => {\n                //     this.percentage = Math.round(percentage ? percentage : 0);\n                // });\n                //\n                // // Handle the completion of the upload\n                // task.then(() => {\n                //     // File uploaded successfully\n                //     console.log('File uploaded:', filePath);\n                // }).catch(error => {\n                //     // Handle any errors during the upload\n                //     console.error('Error uploading file:', error);\n                // })\n\n\n            }\n        }\n    }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ModalController } from \"@ionic/angular\";\n\n@Component({\n  selector: 'app-qr-code',\n  templateUrl: './qr-code.page.html',\n  styleUrls: ['./qr-code.page.scss'],\n})\nexport class QrCodePage implements OnInit {\n\n  constructor(\n      private modalController: ModalController,\n  ) { }\n\n  ngOnInit() {\n  }\n\n  close() {\n\n    // Dismiss modal\n    this.modalController.dismiss();\n  }\n\n}\n"],"names":[],"sourceRoot":"webpack:///"}